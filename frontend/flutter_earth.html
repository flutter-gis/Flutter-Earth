<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter Earth</title>
    <link rel="stylesheet" href="tabs.css">
    <link rel="stylesheet" href="flutter_earth.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="generated_themes.js"></script>
    <script src="interaction-logger.js"></script>
    <script src="tabs.js"></script>
    <script src="flutter_earth.js" defer></script>
    <script src="theme_effects.js" defer></script>
</head>
<body>
    <div id="app" class="app-window">
        <!-- Top Toolbar (replaces sidebar and top-bar) -->
        <div id="top-toolbar" class="top-toolbar">
            <div class="toolbar-content">
                <div class="toolbar-items">
                    <div class="toolbar-item" data-view="welcome">
                        <span class="toolbar-icon">üè†</span>
                        <span class="toolbar-label">Home</span>
                    </div>
                    <div class="toolbar-item" data-view="map">
                        <span class="toolbar-icon">üó∫Ô∏è</span>
                        <span class="toolbar-label">Map</span>
                    </div>
                    <div class="toolbar-item" data-view="download">
                        <span class="toolbar-icon">üì•</span>
                        <span class="toolbar-label">Download</span>
                    </div>
                    <div class="toolbar-item" data-view="satelliteInfo">
                        <span class="toolbar-icon">üõ∞Ô∏è</span>
                        <span class="toolbar-label">Satellite Info</span>
                    </div>
                    <div class="toolbar-item" data-view="indexAnalysis">
                        <span class="toolbar-icon">üå±</span>
                        <span class="toolbar-label">Index Analysis</span>
                    </div>
                    <div class="toolbar-item" data-view="vectorDownload">
                        <span class="toolbar-icon">üåê</span>
                        <span class="toolbar-label">Vector Download</span>
                    </div>
                    <div class="toolbar-item" data-view="dataViewer">
                        <span class="toolbar-icon">üìä</span>
                        <span class="toolbar-label">Data Viewer</span>
                    </div>
                    <div class="toolbar-item" data-view="progress">
                        <span class="toolbar-icon">üîÑ</span>
                        <span class="toolbar-label">Progress</span>
                    </div>
                    <div class="toolbar-item" data-view="settings">
                        <span class="toolbar-icon">‚öôÔ∏è</span>
                        <span class="toolbar-label">Settings</span>
                    </div>
                    <div class="toolbar-item" data-view="about">
                        <span class="toolbar-icon">‚ÑπÔ∏è</span>
                        <span class="toolbar-label">About</span>
                    </div>
                    <div class="toolbar-item" data-panel="toolbox">
                        <span class="toolbar-icon">üß∞</span>
                        <span class="toolbar-label">Toolbox</span>
                    </div>
                    <div class="toolbar-item" data-panel="bookmarks">
                        <span class="toolbar-icon">üîñ</span>
                        <span class="toolbar-label">Bookmarks</span>
                    </div>
                    <div class="toolbar-item" data-panel="attributeTable">
                        <span class="toolbar-icon">üìã</span>
                        <span class="toolbar-label">Attribute Table</span>
                    </div>
                    <div id="toolbar-indicator" class="toolbar-indicator"></div>
                </div>
                <div class="toolbar-right">
                    <img src="../logo.png" class="topbar-logo" alt="Flutter Earth Logo">
                    <span class="app-title">Flutter Earth</span>
                    <span class="app-version">v1.0.0 - Ready</span>
                    <button id="help-button" class="help-button" title="Help / Documentation">?</button>
                </div>
            </div>
        </div>
        <!-- Main Content Area -->
        <div id="main-area" class="main-area theme-animated-bg">
            <!-- Welcome View -->
            <div id="welcome-view" class="view-content theme-animated-bg active">
                <div class="welcome-content">
                    <img src="../logo.png" class="welcome-logo-img" alt="Flutter Earth Logo">
                    <h1>Welcome to Flutter Earth!</h1>
                    <p>Select a tool from the toolbar to get started.</p>
                </div>
            </div>

            <!-- Map View -->
            <div id="map-view" class="view-content theme-animated-bg">
                <div class="map-container">
                    <h2>Map View</h2>
                    <div id="map-placeholder" class="map-placeholder">
                        <p>Map component will be loaded here</p>
                    </div>
                </div>
            </div>

            <!-- Download View -->
            <div id="download-view" class="view-content theme-animated-bg">
                <div class="download-container">
                    <h2>Download Manager</h2>
                    <div class="download-form">
                        <div class="download-form-columns">
                            <div class="form-section">
                                <h3>Area of Interest</h3>
                                <div class="input-group">
                                    <label for="aoi-input">Enter coordinates or GeoJSON:</label>
                                    <div class="input-row">
                                        <input id="aoi-input" type="text" placeholder="[minLon, minLat, maxLon, maxLat] or GeoJSON">
                                        <button id="map-selector-btn" class="map-btn" title="Open map selector">üó∫Ô∏è</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Date Range</h3>
                                <div class="input-group">
                                    <label for="start-date">Start Date:</label>
                                    <div class="input-row">
                                        <input id="start-date" type="text" placeholder="YYYY-MM-DD">
                                        <button class="calendar-btn" data-target="#start-date">üìÖ</button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="end-date">End Date:</label>
                                    <div class="input-row">
                                        <input id="end-date" type="text" placeholder="YYYY-MM-DD">
                                        <button class="calendar-btn" data-target="#end-date">üìÖ</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Sensor</h3>
                                <div class="input-group">
                                    <label for="sensor-select">Select Sensor:</label>
                                    <select id="sensor-select">
                                        <option value="">Choose a sensor...</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Output Directory</h3>
                                <div class="input-group">
                                    <div class="input-row">
                                        <input id="output-dir" type="text" placeholder="Choose output directory">
                                        <button id="browse-btn">Browse...</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Cloud Settings</h3>
                                <div class="input-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="cloud-mask">
                                        <label for="cloud-mask">Apply Cloud Mask</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="cloud-cover">Max Cloud Cover (%):</label>
                                    <input id="cloud-cover" type="number" min="0" max="100" value="20">
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Resolution Settings</h3>
                                <div class="input-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="best-res" checked>
                                        <label for="best-res">Use Highest Resolution</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="target-res">Target Res (m):</label>
                                    <input id="target-res" type="number" min="1" max="1000" value="30" disabled>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Tiling Settings</h3>
                                <div class="input-group">
                                    <label for="tiling-method">Method:</label>
                                    <select id="tiling-method">
                                        <option value="degree">Degree</option>
                                        <option value="pixel">Pixel</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="num-subsections">Subsections:</label>
                                    <input id="num-subsections" type="number" min="1" max="1000" value="100" disabled>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Processing Options</h3>
                                <div class="input-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="overwrite-existing">
                                        <label for="overwrite-existing">Overwrite Existing Files</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="cleanup-tiles" checked>
                                        <label for="cleanup-tiles">Cleanup Intermediate Tiles</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Download Controls</h3>
                                <div class="download-controls">
                                    <button id="start-download" class="btn-primary">
                                        <span id="button-download-spinner" class="spinner" style="display:none;"></span>
                                        Start Download
                                    </button>
                                    <button id="cancel-download" class="btn-secondary">Cancel Download</button>
                                </div>
                                <div class="download-progress">
                                    <div class="progress-bar">
                                        <div id="download-progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <div id="download-status" class="download-status">
                                        <span id="download-spinner" class="spinner" style="display:none;"></span>
                                        Ready
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Download Log</h3>
                                <div class="download-log">
                                    <textarea id="download-log" readonly placeholder="Waiting for download..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view-content">
                <div class="settings-container">
                    <h2>Settings</h2>
                    <div class="settings-form">
                        <!-- Theme Selection -->
                        <div class="form-section">
                            <h3>Appearance</h3>
                            <div class="theme-selection">
                                <!-- Theme Category Tabs -->
                                <div id="theme-tab-container"></div>
                                <!-- Theme Grid: Show filtered themes -->
                                <div id="theme-grid" class="theme-grid">
                                    <!-- All themes will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Theme Options -->
                        <div class="form-section">
                            <h3>Theme Options</h3>
                            <div class="theme-options">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="use-character-catchphrases">
                                    <label for="use-character-catchphrases">Use Character Catchphrases</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="show-special-icons">
                                    <label for="show-special-icons">Show Special Icons</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="enable-animated-background">
                                    <label for="enable-animated-background">Enable Animated Backgrounds</label>
                                </div>
                                <div class="input-group toolbar-animation-group">
                                    <label for="toolbar-animation-select">Toolbar Animation:</label>
                                    <select id="toolbar-animation-select">
                                        <option value="glow">Glow (Default)</option>
                                        <option value="bounce">Bounce</option>
                                        <option value="slide">Slide</option>
                                        <option value="pulse">Pulse</option>
                                        <option value="spin">Spin</option>
                                        <option value="flip">Flip</option>
                                        <option value="shake">Shake</option>
                                        <option value="wiggle">Wiggle</option>
                                        <option value="color">Color Shift</option>
                                        <option value="fade">Fade</option>
                                        <option value="pop">Pop</option>
                                        <option value="rubber">Rubber Band</option>
                                        <option value="swing">Swing</option>
                                        <option value="rotate">Rotate</option>
                                        <option value="none">None</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- General Settings -->
                        <div class="form-section">
                            <h3>General</h3>
                            <div class="input-group">
                                <label for="settings-output-dir">Output Directory:</label>
                                <div class="input-row">
                                    <input id="settings-output-dir" type="text" placeholder="Choose output directory">
                                    <button id="browse-settings-output" class="btn-secondary">Browse...</button>
                                </div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="form-section">
                            <h3>Actions</h3>
                            <div class="action-buttons">
                                <button id="reload-settings-btn" class="btn-secondary">Reload Settings</button>
                                <button id="clear-cache-settings-btn" class="btn-secondary">Clear Cache and Logs</button>
                                <button id="auth-settings-btn" class="btn-primary">Authenticate with Earth Engine</button>
                                <label for="settings-key-file" style="margin-left:8px; font-weight:500;">Key File:</label>
                                <input id="settings-key-file" type="file" accept=".json" style="display:inline-block; width:auto; margin-left:4px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About View -->
            <div id="about-view" class="view-content">
                <div class="about-container">
                    <div class="about-content">
                        <h2 id="about-greeting">Hello!</h2>
                        <h1>About Flutter Earth</h1>
                        <p class="version">Version 1.0.0</p>
                        <p class="developer">Developed by Jakob Newman and contributors.</p>
                        
                        <div class="about-actions">
                            <button id="visit-website-btn" class="btn-primary">Visit Project Website</button>
                        </div>
                        
                        <div class="changelog-section">
                            <h3>Recent Changes (Changelog)</h3>
                            <div class="changelog-content">
                                <div id="changelog-text">
                                    <p><strong>Version 1.0.0</strong></p>
                                    <ul>
                                        <li>Initial release of Flutter Earth</li>
                                        <li>Earth Engine integration for satellite data access</li>
                                        <li>Multi-sensor support (Landsat, Sentinel, MODIS)</li>
                                        <li>Vector data download capabilities</li>
                                        <li>Index analysis tools (NDVI, NDWI, etc.)</li>
                                        <li>Data viewer for raster and vector files</li>
                                        <li>Theme system with multiple visual styles</li>
                                        <li>Offline Electron application</li>
                                    </ul>
                                    <p><strong>Upcoming Features</strong></p>
                                    <ul>
                                        <li>Advanced GIS analysis tools</li>
                                        <li>Real-time data processing</li>
                                        <li>Cloud-based collaboration</li>
                                        <li>Mobile application support</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress View -->
            <div id="progress-view" class="view-content">
                <div class="progress-container">
                    <h2>Progress & Management</h2>
                    
                    <!-- Current Download Status -->
                    <div class="form-section">
                        <h3>Current Download Status</h3>
                        <div class="current-status">
                            <div class="progress-bar">
                                <div id="current-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div id="current-status-text" class="status-text">No active downloads</div>
                        </div>
                        
                        <!-- Control Buttons -->
                        <div class="control-buttons">
                            <button id="cancel-current-download" class="btn-secondary" disabled>Cancel Download</button>
                            <button id="clear-cache-logs" class="btn-secondary">Clear Cache & Logs</button>
                            <button id="reload-settings" class="btn-secondary">Reload Settings</button>
                            <button id="clear-history" class="btn-secondary">Clear History</button>
                        </div>
                    </div>

                    <!-- Download History -->
                    <div class="form-section">
                        <h3>Download History</h3>
                        <div class="download-history">
                            <div id="history-list" class="history-list">
                                <div class="history-item">
                                    <div class="history-header">
                                        <span class="history-title">No download history</span>
                                        <span class="history-status">-</span>
                                    </div>
                                    <div class="history-details">
                                        <span>No downloads completed yet</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Index Analysis View -->
            <div id="indexAnalysis-view" class="view-content">
                <div class="index-analysis-container">
                    <h2>Index Analysis</h2>
                    <div class="analysis-form">
                        <!-- Input Raster Selection -->
                        <div class="form-section">
                            <h3>Input Raster Files</h3>
                            <div class="input-group">
                                <div class="button-group">
                                    <button id="add-raster-files" class="btn-secondary">Add Raster Files...</button>
                                    <button id="clear-raster-files" class="btn-secondary" disabled>Clear All</button>
                                </div>
                            </div>
                            <div class="file-list">
                                <div id="raster-files-list" class="files-list">
                                    <div class="no-files">No raster files selected</div>
                                </div>
                            </div>
                        </div>

                        <!-- Index Selection -->
                        <div class="form-section">
                            <h3>Select Indices to Calculate</h3>
                            <div class="index-selection">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-ndvi">
                                    <label for="index-ndvi">NDVI - Normalized Difference Vegetation Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-ndwi">
                                    <label for="index-ndwi">NDWI - Normalized Difference Water Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-ndbi">
                                    <label for="index-ndbi">NDBI - Normalized Difference Built-up Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-evi">
                                    <label for="index-evi">EVI - Enhanced Vegetation Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-savi">
                                    <label for="index-savi">SAVI - Soil Adjusted Vegetation Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-ndmi">
                                    <label for="index-ndmi">NDMI - Normalized Difference Moisture Index</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-nbr">
                                    <label for="index-nbr">NBR - Normalized Burn Ratio</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="index-ndsi">
                                    <label for="index-ndsi">NDSI - Normalized Difference Snow Index</label>
                                </div>
                            </div>
                        </div>

                        <!-- Band Mapping -->
                        <div class="form-section">
                            <h3>Band Mapping (Standard Order)</h3>
                            <div class="band-mapping-info">
                                <p><strong>For Landsat:</strong> Band 1=Blue, Band 2=Green, Band 3=Red, Band 4=NIR, Band 5=SWIR1, Band 6=SWIR2</p>
                                <p><strong>For Sentinel-2:</strong> Band 2=Blue, Band 3=Green, Band 4=Red, Band 8=NIR, Band 11=SWIR1, Band 12=SWIR2</p>
                            </div>
                        </div>

                        <!-- Output Settings -->
                        <div class="form-section">
                            <h3>Output Settings</h3>
                            <div class="input-group">
                                <label for="analysis-output-dir">Output Directory:</label>
                                <div class="input-row">
                                    <input id="analysis-output-dir" type="text" placeholder="Choose output directory">
                                    <button id="browse-analysis-output" class="btn-secondary">Browse...</button>
                                </div>
                            </div>
                        </div>

                        <!-- Analysis Controls -->
                        <div class="form-section">
                            <h3>Analysis Controls</h3>
                            <div class="analysis-controls">
                                <button id="start-analysis" class="btn-primary" disabled>Start Analysis</button>
                                <button id="cancel-analysis" class="btn-secondary" disabled>Cancel Analysis</button>
                            </div>
                            <div class="analysis-progress">
                                <div class="progress-bar">
                                    <div id="analysis-progress" class="progress-fill" style="width: 0%"></div>
                                </div>
                                <div id="analysis-status" class="analysis-status">Ready</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vector Download View -->
            <div id="vectorDownload-view" class="view-content">
                <div class="vector-download-container">
                    <h2>Vector Data Download</h2>
                    <div class="vector-form">
                        <!-- Data Source Selection -->
                        <div class="form-section">
                            <h3>Data Source</h3>
                            <div class="input-group">
                                <label for="vector-data-source">Select Data Source:</label>
                                <select id="vector-data-source">
                                    <option value="overpass">Overpass API (OSM)</option>
                                    <option value="natural-earth">Natural Earth</option>
                                    <option value="openstreetmap">OpenStreetMap</option>
                                    <option value="custom">Custom API</option>
                                </select>
                            </div>
                            <div id="data-source-description" class="description">
                                Download vector data from OpenStreetMap using Overpass API queries.
                            </div>
                        </div>

                        <!-- Query Input -->
                        <div class="form-section">
                            <h3>Query</h3>
                            <div class="input-group">
                                <label for="vector-query">Overpass Query:</label>
                                <textarea id="vector-query" placeholder="Enter Overpass query or URL..." rows="6"></textarea>
                            </div>
                            <div class="button-group">
                                <button id="load-example-query" class="btn-secondary">Load Example Query</button>
                                <button id="clear-vector-query" class="btn-secondary">Clear Query</button>
                            </div>
                        </div>

                        <!-- Area of Interest -->
                        <div class="form-section">
                            <h3>Area of Interest (Optional)</h3>
                            <div class="input-group">
                                <div class="input-row">
                                    <input id="vector-aoi" type="text" placeholder="minLon,minLat,maxLon,maxLat or GeoJSON Polygon">
                                    <button id="select-vector-aoi" class="btn-secondary">Select on Map</button>
                                </div>
                            </div>
                            <div class="description">
                                Leave empty to download data for the entire world (not recommended for large queries).
                            </div>
                        </div>

                        <!-- Output Settings -->
                        <div class="form-section">
                            <h3>Output Settings</h3>
                            <div class="input-group">
                                <label for="vector-output-format">Output Format:</label>
                                <select id="vector-output-format">
                                    <option value="geojson">GeoJSON</option>
                                    <option value="shapefile">Shapefile</option>
                                    <option value="kml">KML</option>
                                    <option value="gpx">GPX</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="vector-output-dir">Output Directory:</label>
                                <div class="input-row">
                                    <input id="vector-output-dir" type="text" placeholder="Choose output directory">
                                    <button id="browse-vector-output" class="btn-secondary">Browse...</button>
                                </div>
                            </div>
                        </div>

                        <!-- Download Controls -->
                        <div class="form-section">
                            <h3>Download Controls</h3>
                            <div class="download-controls">
                                <button id="start-vector-download" class="btn-primary">Start Download</button>
                                <button id="cancel-vector-download" class="btn-secondary" disabled>Cancel Download</button>
                            </div>
                            <div class="download-progress">
                                <div class="progress-bar">
                                    <div id="vector-download-progress" class="progress-fill" style="width: 0%"></div>
                                </div>
                                <div id="vector-download-status" class="download-status">Ready</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Viewer View -->
            <div id="dataViewer-view" class="view-content">
                <div class="data-viewer-container">
                    <h2>Data Viewer</h2>
                    <div class="data-viewer-content">
                        <!-- Data Loading Controls -->
                        <div class="form-section">
                            <h3>Load Data</h3>
                            <div class="button-group">
                                <button id="load-raster-btn" class="btn-secondary">Load Raster...</button>
                                <button id="load-vector-btn" class="btn-secondary">Load Vector...</button>
                                <button id="clear-data-btn" class="btn-secondary" disabled>Clear All</button>
                            </div>
                        </div>

                        <!-- Data Display Area -->
                        <div class="data-display-area">
                            <!-- Raster Data Information -->
                            <div id="raster-data-section" class="data-section" style="display: none;">
                                <h3>Raster Data</h3>
                                <div class="data-info">
                                    <div class="data-file">
                                        <strong>File:</strong> <span id="raster-file-path">N/A</span>
                                    </div>
                                    <div class="data-grid">
                                        <div class="data-row">
                                            <span class="data-label">Dimensions:</span>
                                            <span id="raster-dimensions" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">Bands:</span>
                                            <span id="raster-bands" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">CRS:</span>
                                            <span id="raster-crs" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">Data Type:</span>
                                            <span id="raster-dtype" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">No Data Value:</span>
                                            <span id="raster-nodata" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">Bounds:</span>
                                            <span id="raster-bounds" class="data-value">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Vector Data Information -->
                            <div id="vector-data-section" class="data-section" style="display: none;">
                                <h3>Vector Data</h3>
                                <div class="data-info">
                                    <div class="data-file">
                                        <strong>File:</strong> <span id="vector-file-path">N/A</span>
                                    </div>
                                    <div class="data-grid">
                                        <div class="data-row">
                                            <span class="data-label">Features:</span>
                                            <span id="vector-features" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">Geometry Types:</span>
                                            <span id="vector-geometry-types" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">CRS:</span>
                                            <span id="vector-crs" class="data-value">N/A</span>
                                        </div>
                                        <div class="data-row">
                                            <span class="data-label">Bounds:</span>
                                            <span id="vector-bounds" class="data-value">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- No Data Message -->
                            <div id="no-data-message" class="no-data-message">
                                <p>No data loaded. Use the buttons above to load raster or vector data files.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Satellite Info View -->
            <div id="satelliteInfo-view" class="view-content">
                <div class="satellite-info-container">
                    <!-- Header Section -->
                    <div class="satellite-header">
                        <div class="header-content">
                            <h2>üõ∞Ô∏è Satellite Catalog</h2>
                            <p class="description">Explore Earth observation satellites and their capabilities. Get real-time data from Google Earth Engine.</p>
                        </div>
                        <div class="header-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="total-satellites">0</span>
                                <span class="stat-label">Satellites</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="total-datasets">0</span>
                                <span class="stat-label">Datasets</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="last-updated">-</span>
                                <span class="stat-label">Last Updated</span>
                            </div>
                        </div>
                    </div>

                    <!-- Web Crawler Dashboard -->
                    <div class="crawler-dashboard">
                        <div class="dashboard-header">
                            <h3>üï∑Ô∏è Google Earth Engine Data Crawler</h3>
                            <div class="dashboard-status">
                                <span class="status-dot" id="status-dot"></span>
                                <span id="crawler-status" class="status-text">Ready to collect satellite data</span>
                            </div>
                        </div>
                        
                        <!-- Enhanced Crawler Info -->
                        <div class="crawler-info-panel">
                            <div class="info-alert">
                                <div class="alert-icon">‚ÑπÔ∏è</div>
                                <div class="alert-content">
                                    <h4>First Time Setup</h4>
                                    <p>Click "Run Web Crawler" to collect satellite data from Google Earth Engine. This will download comprehensive information about available satellites, sensors, and datasets.</p>
                                    <ul>
                                        <li>üìä Collects dataset information from Earth Engine catalog</li>
                                        <li>üõ∞Ô∏è Extracts satellite details and capabilities</li>
                                        <li>üíª Generates ready-to-use Earth Engine code snippets</li>
                                        <li>‚è±Ô∏è Takes 2-5 minutes depending on connection speed</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-content">
                            <div class="crawler-info">
                                <div class="info-card">
                                    <div class="info-icon">üìä</div>
                                    <div class="info-content">
                                        <h4>Data Source</h4>
                                        <p>Google Earth Engine Catalog</p>
                                    </div>
                                </div>
                                <div class="info-card">
                                    <div class="info-icon">üîÑ</div>
                                    <div class="info-content">
                                        <h4>Update Frequency</h4>
                                        <p>On-demand</p>
                                    </div>
                                </div>
                                <div class="info-card">
                                    <div class="info-icon">üíæ</div>
                                    <div class="info-content">
                                        <h4>Storage</h4>
                                        <p>Local JSON + Thumbnails</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="crawler-actions">
                                <div class="primary-action">
                                    <button id="run-web-crawler" class="crawler-btn primary large" type="button">
                                    <span class="btn-icon">üï∑Ô∏è</span>
                                        <span class="btn-text">Start Data Collection</span>
                                        <span class="btn-subtitle">Collect satellite data from Earth Engine</span>
                                </button>

                                </div>
                                <div class="secondary-actions">
                                <button id="cancel-web-crawler" class="crawler-btn danger" disabled>
                                    <span class="btn-icon">‚úñÔ∏è</span>
                                        <span class="btn-text">Stop Collection</span>
                                </button>
                                <button id="refresh-crawler-data" class="crawler-btn secondary">
                                    <span class="btn-icon">üîÑ</span>
                                    <span class="btn-text">Refresh Data</span>
                                </button>
                                <button id="view-crawler-log" class="crawler-btn secondary">
                                    <span class="btn-icon">üìã</span>
                                    <span class="btn-text">View Log</span>
                                </button>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Progress Display -->
                        <div id="crawler-progress" class="crawler-progress" style="display: none;">
                            <div class="progress-header">
                                <h4>üîÑ Data Collection in Progress</h4>
                                <div class="progress-info">
                                <span class="progress-percentage" id="progress-percentage">0%</span>
                                    <span class="progress-time" id="progress-time">Starting...</span>
                                </div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="crawler-progress-fill" class="progress-fill" style="width: 0%"></div>
                                </div>
                                <div class="progress-steps">
                                    <div class="step" data-step="init">
                                        <span class="step-icon">üöÄ</span>
                                        <span class="step-text">Initialize</span>
                                    </div>
                                    <div class="step" data-step="connect">
                                        <span class="step-icon">üåê</span>
                                        <span class="step-text">Connect</span>
                                    </div>
                                    <div class="step" data-step="fetch">
                                        <span class="step-icon">üì°</span>
                                        <span class="step-text">Fetch Data</span>
                                    </div>
                                    <div class="step" data-step="process">
                                        <span class="step-icon">‚öôÔ∏è</span>
                                        <span class="step-text">Process</span>
                                    </div>
                                    <div class="step" data-step="download">
                                        <span class="step-icon">üì•</span>
                                        <span class="step-text">Download</span>
                                    </div>
                                    <div class="step" data-step="save">
                                        <span class="step-icon">üíæ</span>
                                        <span class="step-text">Save</span>
                                    </div>
                                </div>
                            </div>
                            <div id="crawler-message" class="crawler-message">Initializing web crawler...</div>
                        </div>
                    </div>

                    <!-- Main Content Area -->
                    <div class="satellite-main-content">
                        <!-- Filters and Search -->
                        <div class="filters-section">
                            <div class="search-container">
                                <div class="search-box">
                                    <span class="search-icon">üîç</span>
                                    <input id="satellite-search" type="text" placeholder="Search satellites, sensors, or applications...">
                                    <button class="clear-search" id="clear-search">√ó</button>
                                </div>
                            </div>
                            
                            <div class="filter-tabs">
                                <button class="filter-tab active" data-filter="all">
                                    <span class="tab-icon">üåü</span>
                                    <span class="tab-text">All</span>
                                </button>
                                <button class="filter-tab" data-filter="optical">
                                    <span class="tab-icon">üëÅÔ∏è</span>
                                    <span class="tab-text">Optical</span>
                                </button>
                                <button class="filter-tab" data-filter="radar">
                                    <span class="tab-icon">üì°</span>
                                    <span class="tab-text">Radar</span>
                                </button>
                                <button class="filter-tab" data-filter="thermal">
                                    <span class="tab-icon">üî•</span>
                                    <span class="tab-text">Thermal</span>
                                </button>
                                <button class="filter-tab" data-filter="multispectral">
                                    <span class="tab-icon">üåà</span>
                                    <span class="tab-text">Multispectral</span>
                                </button>
                            </div>
                        </div>

                        <!-- Satellite Grid -->
                        <div class="satellite-grid-container">
                            <div class="grid-header">
                                <h3>Available Satellites</h3>
                                <div class="grid-controls">
                                    <button class="view-toggle active" data-view="grid">
                                        <span class="toggle-icon">‚äû</span>
                                    </button>
                                    <button class="view-toggle" data-view="list">
                                        <span class="toggle-icon">‚ò∞</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="satellite-grid" id="satellite-grid">
                                <!-- Satellites will be populated here -->
                            </div>
                        </div>

                        <!-- Satellite Details Panel -->
                        <div class="satellite-details-panel" id="satellite-details-panel">
                            <div class="panel-header">
                                <h3>Satellite Details</h3>
                                <button class="close-panel" id="close-details">√ó</button>
                            </div>
                            
                            <div class="panel-content">
                                <div class="satellite-hero">
                                    <div class="satellite-basic-info">
                                        <h2 id="detail-satellite-name">Select a Satellite</h2>
                                        <div class="satellite-tags" id="satellite-tags">
                                            <!-- Tags will be populated here -->
                                        </div>
                                        <div class="satellite-stats">
                                            <div class="stat">
                                                <span class="stat-value" id="detail-resolution">-</span>
                                                <span class="stat-label">Resolution</span>
                                            </div>
                                            <div class="stat">
                                                <span class="stat-value" id="detail-datasets">-</span>
                                                <span class="stat-label">Datasets</span>
                                            </div>
                                            <div class="stat">
                                                <span class="stat-value" id="detail-status">-</span>
                                                <span class="stat-label">Status</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="satellite-sections">
                                    <div class="section">
                                        <h4>üìã Overview</h4>
                                        <p id="detail-description">Select a satellite to view its description and capabilities.</p>
                                    </div>

                                    <div class="section">
                                        <h4>üéØ Applications</h4>
                                        <div class="applications-grid" id="detail-applications">
                                            <!-- Applications will be populated here -->
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h4>üìä Bands & Sensors</h4>
                                        <div class="bands-grid" id="detail-bands">
                                            <!-- Bands will be populated here -->
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h4>üíª Earth Engine Code</h4>
                                        <div class="code-section" id="detail-code">
                                            <div class="code-header">
                                                <span>Ready-to-use code snippet</span>
                                                <button class="copy-code-btn" id="copy-code-btn">
                                                    <span class="copy-icon">üìã</span>
                                                    <span class="copy-text">Copy</span>
                                                </button>
                                            </div>
                                            <pre class="code-block" id="code-block"><code>Select a satellite to view its Earth Engine code snippet.</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="satellite-actions">
                                    <button class="action-btn primary" id="use-for-download">
                                        <span class="action-icon">üì•</span>
                                        <span class="action-text">Use for Download</span>
                                    </button>
                                    <button class="action-btn secondary" id="share-satellite">
                                        <span class="action-icon">üì§</span>
                                        <span class="action-text">Share</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Crawler Console and Bottom Progress Bar (hidden by default) -->
                <div id="crawler-bottom-bar" class="crawler-bottom-bar" style="display: none;">
                    <div class="crawler-bottom-left">
                        <div class="crawler-console-section">
                            <div class="console-label">Crawler Console</div>
                            <pre id="crawler-console" class="crawler-console"></pre>
                        </div>
                        <div class="crawler-progress-section">
                            <div class="progress-label">Progress</div>
                            <div class="bottom-progress-bar">
                                <div id="crawler-bottom-progress" class="bottom-progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="crawler-bottom-right">
                        <div class="graph-label">Speed (datasets/sec)</div>
                        <canvas id="crawler-speed-graph" width="220" height="60" style="background: #181c24; border-radius: 8px;"></canvas>
                    </div>
                </div>

                <!-- Download Console and Bottom Progress Bar (hidden by default) -->
                <div id="download-bottom-bar" class="download-bottom-bar" style="display: none;">
                    <div class="download-bottom-left">
                        <div class="download-console-section">
                            <div class="console-label">Download Console</div>
                            <pre id="download-console" class="download-console"></pre>
                        </div>
                        <div class="download-progress-section">
                            <div class="progress-label">Download Progress</div>
                            <div class="bottom-progress-bar">
                                <div id="download-bottom-progress" class="bottom-progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="download-bottom-right">
                        <div class="graph-label">Speed (MB/s)</div>
                        <canvas id="download-speed-graph" width="220" height="60" style="background: #181c24; border-radius: 8px;"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div id="status-bar" class="status-bar">
            <div class="status-content">
                <div class="status-spacer"></div>
                <div class="status-text">
                    <span id="connection-status">Status: Initializing...</span>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="auth-dialog" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Authentication Required</h3>
                <div class="auth-form">
                    <div class="input-group">
                        <label for="auth-key-file">Key File:</label>
                        <input id="auth-key-file" type="file" accept=".json">
                    </div>
                    <div class="input-group">
                        <label for="auth-project-id">Project ID:</label>
                        <input id="auth-project-id" type="text" placeholder="Enter project ID">
                    </div>
                    <div class="button-group">
                        <button id="auth-submit" class="btn-primary">Submit</button>
                        <button id="auth-help" class="btn-secondary">Help</button>
                        <button id="auth-cancel" class="btn-secondary">Cancel</button>
                        <button id="auth-offline" class="btn-secondary">Continue Offline</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Modal -->
        <div id="calendar-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="calendar-header">
                    <button id="calendar-prev" class="calendar-nav">‚Äπ</button>
                    <h3 id="calendar-title">January 2024</h3>
                    <button id="calendar-next" class="calendar-nav">‚Ä∫</button>
                </div>
                <div id="calendar-grid" class="calendar-grid"></div>
            </div>
        </div>

        <!-- Map Selector Overlay (fullscreen) -->
        <div id="map-selector-overlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:2000; background:rgba(0,0,0,0.7);">
            <button id="map-selector-close" style="position:absolute;top:24px;right:24px;z-index:2100;background:#fff;color:#d32f2f;border:none;border-radius:50%;width:44px;height:44px;font-size:2rem;box-shadow:0 2px 8px rgba(0,0,0,0.15);cursor:pointer;">&times;</button>
            <iframe src="map_selector.html" frameborder="0" style="position:absolute;top:0;left:0;width:100vw;height:100vh;border:none;z-index:2001;"></iframe>
        </div>

        <!-- Notification Popup -->
        <div id="notification-popup" class="notification-popup" style="display: none;">
            <div class="notification-content">
                <span id="notification-text"></span>
            </div>
        </div>
    </div>
</body>
</html> 