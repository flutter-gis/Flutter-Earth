<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Tab Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
        }
        .toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: #333;
            border-radius: 8px;
        }
        .toolbar-item {
            padding: 10px 15px;
            background: #555;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        .toolbar-item:hover {
            background: #777;
        }
        .toolbar-item.active {
            background: #007acc;
        }
        .view-content {
            display: none;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
            min-height: 300px;
        }
        .view-content.active {
            display: block;
        }
        .debug {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .test-button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #005a9e;
        }
    </style>
</head>
<body>
    <h1>Simple Tab Test</h1>
    
    <div class="debug" id="debug">
        Debug info will appear here...
    </div>

    <div class="toolbar">
        <div class="toolbar-item active" data-view="welcome">üè† Home</div>
        <div class="toolbar-item" data-view="map">üó∫Ô∏è Map</div>
        <div class="toolbar-item" data-view="download">üì• Download</div>
        <div class="toolbar-item" data-view="satelliteInfo">üõ∞Ô∏è Satellite Info</div>
        <div class="toolbar-item" data-view="indexAnalysis">üå± Index Analysis</div>
        <div class="toolbar-item" data-view="vectorDownload">üåê Vector Download</div>
        <div class="toolbar-item" data-view="dataViewer">üìä Data Viewer</div>
        <div class="toolbar-item" data-view="progress">üîÑ Progress</div>
        <div class="toolbar-item" data-view="settings">‚öôÔ∏è Settings</div>
        <div class="toolbar-item" data-view="about">‚ÑπÔ∏è About</div>
    </div>

    <div id="welcome-view" class="view-content active">
        <h2>Welcome View</h2>
        <p>This is the welcome view. If you can see this, the tab system is working!</p>
    </div>

    <div id="map-view" class="view-content">
        <h2>Map View</h2>
        <p>This is the map view.</p>
    </div>

    <div id="download-view" class="view-content">
        <h2>Download View</h2>
        <p>This is the download view.</p>
    </div>

    <div id="satelliteInfo-view" class="view-content">
        <h2>Satellite Info View</h2>
        <p>This is the satellite info view.</p>
    </div>

    <div id="indexAnalysis-view" class="view-content">
        <h2>Index Analysis View</h2>
        <p>This is the index analysis view.</p>
    </div>

    <div id="vectorDownload-view" class="view-content">
        <h2>Vector Download View</h2>
        <p>This is the vector download view.</p>
    </div>

    <div id="dataViewer-view" class="view-content">
        <h2>Data Viewer View</h2>
        <p>This is the data viewer view.</p>
    </div>

    <div id="progress-view" class="view-content">
        <h2>Progress View</h2>
        <p>This is the progress view.</p>
    </div>

    <div id="settings-view" class="view-content">
        <h2>Settings View</h2>
        <p>This is the settings view.</p>
    </div>

    <div id="about-view" class="view-content">
        <h2>About View</h2>
        <p>This is the about view.</p>
    </div>

    <div style="margin-top: 20px;">
        <h3>Test Controls:</h3>
        <button class="test-button" onclick="testSwitchView('welcome')">Test Welcome</button>
        <button class="test-button" onclick="testSwitchView('map')">Test Map</button>
        <button class="test-button" onclick="testSwitchView('download')">Test Download</button>
        <button class="test-button" onclick="testSwitchView('satelliteInfo')">Test Satellite Info</button>
        <button class="test-button" onclick="testSwitchView('settings')">Test Settings</button>
        <button class="test-button" onclick="runDiagnostics()">Run Diagnostics</button>
        <button class="test-button" onclick="clearDebug()">Clear Debug</button>
        <button class="test-button" onclick="testAllViews()">Test All Views</button>
    </div>

    <script>
        let debugLog = [];

        function log(message) {
            const debug = document.getElementById('debug');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            debugLog.push(logEntry);
            debug.innerHTML = debugLog.slice(-15).join('<br>');
            console.log(message);
        }

        function clearDebug() {
            debugLog = [];
            document.getElementById('debug').innerHTML = 'Debug cleared...';
        }

        function switchView(viewName) {
            log(`Switching to view: ${viewName}`);
            
            // Hide all views
            const allViews = document.querySelectorAll('.view-content');
            log(`Found ${allViews.length} view elements`);
            allViews.forEach(view => {
                view.classList.remove('active');
                view.style.display = 'none';
                log(`Hidden view: ${view.id}`);
            });

            // Show selected view
            const targetView = document.getElementById(`${viewName}-view`);
            if (targetView) {
                targetView.style.display = 'block';
                targetView.classList.add('active');
                log(`Successfully switched to ${viewName}-view`);
            } else {
                log(`View not found: ${viewName}-view`);
                return;
            }

            // Update toolbar active state
            document.querySelectorAll('.toolbar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeToolbarItem = document.querySelector(`.toolbar-item[data-view="${viewName}"]`);
            if (activeToolbarItem) {
                activeToolbarItem.classList.add('active');
                log(`Set toolbar item active: ${viewName}`);
            } else {
                log(`Toolbar item not found for view: ${viewName}`);
            }
        }

        function testSwitchView(viewName) {
            log(`=== Testing switchView('${viewName}') ===`);
            switchView(viewName);
        }

        function testAllViews() {
            log('=== Testing all views ===');
            const views = ['welcome', 'map', 'download', 'satelliteInfo', 'indexAnalysis', 'vectorDownload', 'dataViewer', 'progress', 'settings', 'about'];
            let index = 0;
            
            const interval = setInterval(() => {
                if (index < views.length) {
                    switchView(views[index]);
                    index++;
                } else {
                    clearInterval(interval);
                    log('=== All views tested ===');
                }
            }, 1000);
        }

        function runDiagnostics() {
            log('=== RUNNING DIAGNOSTICS ===');
            
            // Check if all view elements exist
            const expectedViews = ['welcome', 'map', 'download', 'satelliteInfo', 'indexAnalysis', 'vectorDownload', 'dataViewer', 'progress', 'settings', 'about'];
            expectedViews.forEach(viewName => {
                const element = document.getElementById(`${viewName}-view`);
                if (element) {
                    log(`‚úì View element found: ${viewName}-view`);
                } else {
                    log(`‚úó View element missing: ${viewName}-view`);
                }
            });

            // Check if all toolbar items exist
            expectedViews.forEach(viewName => {
                const element = document.querySelector(`.toolbar-item[data-view="${viewName}"]`);
                if (element) {
                    log(`‚úì Toolbar item found: ${viewName}`);
                } else {
                    log(`‚úó Toolbar item missing: ${viewName}`);
                }
            });

            // Check current state
            const activeView = document.querySelector('.view-content.active');
            const activeToolbar = document.querySelector('.toolbar-item.active');
            
            log(`Current active view: ${activeView ? activeView.id : 'NONE'}`);
            log(`Current active toolbar: ${activeToolbar ? activeToolbar.dataset.view : 'NONE'}`);

            log('=== DIAGNOSTICS COMPLETE ===');
        }

        // Setup event listeners
        document.addEventListener('DOMContentLoaded', function() {
            log('DOM loaded, setting up event listeners');
            
            const toolbarItems = document.querySelectorAll('.toolbar-item');
            log(`Found ${toolbarItems.length} toolbar items`);
            
            toolbarItems.forEach((item, index) => {
                log(`Setting up event listener for toolbar item ${index}: ${item.dataset.view}`);
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    const view = item.dataset.view;
                    log(`Toolbar item clicked: ${view}`);
                    if (view) {
                        switchView(view);
                    }
                });
            });

            // Set initial active state
            const welcomeItem = document.querySelector('.toolbar-item[data-view="welcome"]');
            if (welcomeItem) {
                welcomeItem.classList.add('active');
                log('Set welcome toolbar item as active');
            }

            log('Event listeners setup complete');
            log('Ready for testing!');
        });

        // Test all views on load
        window.addEventListener('load', function() {
            setTimeout(() => {
                log('Running initial diagnostics...');
                runDiagnostics();
            }, 100);
        });
    </script>
</body>
</html> 