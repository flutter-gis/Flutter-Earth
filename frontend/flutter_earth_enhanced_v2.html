<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter Earth - Enhanced v2.0</title>
    
    <!-- Modern CSS Frameworks -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    
    <!-- Custom Enhanced CSS -->
    <link rel="stylesheet" href="flutter_earth_enhanced_v2.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="../logo.ico">
    
    <!-- Enhanced Theme System -->
    <script src="generated_themes.js"></script>
    <script src="theme_effects_enhanced.js"></script>
    
    <!-- Utility Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="interaction-logger.js"></script>
    <script src="tabs.js"></script>
    <script src="flutter_earth_enhanced_v2.js" defer></script>
</head>
<body>
    <div id="app" class="app-window">
        <!-- Enhanced Top Toolbar -->
        <div id="top-toolbar" class="top-toolbar">
            <div class="toolbar-content">
                <div class="toolbar-items">
                    <!-- Main Navigation -->
                    <div class="toolbar-item" data-view="welcome">
                        <i class="fas fa-home toolbar-icon"></i>
                        <span class="toolbar-label">Home</span>
                    </div>
                    <div class="toolbar-item" data-view="map">
                        <i class="fas fa-map toolbar-icon"></i>
                        <span class="toolbar-label">Map</span>
                    </div>
                    <div class="toolbar-item" data-view="download">
                        <i class="fas fa-download toolbar-icon"></i>
                        <span class="toolbar-label">Download</span>
                    </div>
                    <div class="toolbar-item" data-view="satelliteInfo">
                        <i class="fas fa-satellite toolbar-icon"></i>
                        <span class="toolbar-label">Satellites</span>
                    </div>
                    <div class="toolbar-item" data-view="indexAnalysis">
                        <i class="fas fa-chart-line toolbar-icon"></i>
                        <span class="toolbar-label">Analysis</span>
                    </div>
                    <div class="toolbar-item" data-view="vectorDownload">
                        <i class="fas fa-vector-square toolbar-icon"></i>
                        <span class="toolbar-label">Vector</span>
                    </div>
                    <div class="toolbar-item" data-view="dataViewer">
                        <i class="fas fa-table toolbar-icon"></i>
                        <span class="toolbar-label">Data</span>
                    </div>
                    <div class="toolbar-item" data-view="progress">
                        <i class="fas fa-tasks toolbar-icon"></i>
                        <span class="toolbar-label">Progress</span>
                    </div>
                    <div class="toolbar-item" data-view="settings">
                        <i class="fas fa-cog toolbar-icon"></i>
                        <span class="toolbar-label">Settings</span>
                    </div>
                    <div class="toolbar-item" data-view="about">
                        <i class="fas fa-info-circle toolbar-icon"></i>
                        <span class="toolbar-label">About</span>
                    </div>
                    
                    <!-- Separator -->
                    <div class="toolbar-separator"></div>
                    
                    <!-- Tools Panel -->
                    <div class="toolbar-item" data-panel="toolbox">
                        <i class="fas fa-toolbox toolbar-icon"></i>
                        <span class="toolbar-label">Tools</span>
                    </div>
                    <div class="toolbar-item" data-panel="bookmarks">
                        <i class="fas fa-bookmark toolbar-icon"></i>
                        <span class="toolbar-label">Bookmarks</span>
                    </div>
                    <div class="toolbar-item" data-panel="attributeTable">
                        <i class="fas fa-list-alt toolbar-icon"></i>
                        <span class="toolbar-label">Attributes</span>
                    </div>
                    
                    <!-- Indicator -->
                    <div id="toolbar-indicator" class="toolbar-indicator"></div>
                </div>
                
                <!-- Right Side -->
                <div class="toolbar-right">
                    <img src="../logo.png" class="topbar-logo" alt="Flutter Earth Logo">
                    <span class="app-title">Flutter Earth</span>
                    <span class="app-version">v2.0 - Enhanced</span>
                    
                    <!-- Status Indicators -->
                    <div class="status-indicators">
                        <div id="connection-status" class="status-indicator online" title="Connection Status">
                            <i class="fas fa-wifi"></i>
                        </div>
                        <div id="auth-status" class="status-indicator" title="Authentication Status">
                            <i class="fas fa-user-shield"></i>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <button id="test-auth-button" class="action-button" title="Test Authentication">
                        <i class="fas fa-key"></i>
                    </button>
                    <button id="help-button" class="action-button" title="Help & Documentation">
                        <i class="fas fa-question-circle"></i>
                    </button>
                    <button id="theme-toggle" class="action-button" title="Toggle Theme">
                        <i class="fas fa-palette"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="main-area" class="main-area theme-animated-bg">
            <!-- Welcome View -->
            <div id="welcome-view" class="view-content theme-animated-bg active">
                <div class="welcome-content">
                    <div class="welcome-header">
                        <img src="../logo.png" class="welcome-logo-img" alt="Flutter Earth Logo">
                        <h1>Welcome to Flutter Earth v2.0</h1>
                        <p class="welcome-subtitle">Enhanced Earth Observation Platform</p>
                    </div>
                    
                    <div class="welcome-features">
                        <div class="feature-grid">
                            <div class="feature-card">
                                <i class="fas fa-map-marked-alt"></i>
                                <h3>Interactive Mapping</h3>
                                <p>Explore satellite imagery with advanced visualization tools</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-download"></i>
                                <h3>Data Download</h3>
                                <p>Download satellite data with customizable parameters</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-chart-bar"></i>
                                <h3>Analysis Tools</h3>
                                <p>Perform advanced analysis on satellite imagery</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-cogs"></i>
                                <h3>Processing Pipeline</h3>
                                <p>Automated data processing and analysis workflows</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="welcome-actions">
                        <button class="btn btn-primary btn-lg" data-view="map">
                            <i class="fas fa-map"></i> Start Mapping
                        </button>
                        <button class="btn btn-outline-primary btn-lg" data-view="download">
                            <i class="fas fa-download"></i> Download Data
                        </button>
                    </div>
                </div>
            </div>

            <!-- Enhanced Map View -->
            <div id="map-view" class="view-content theme-animated-bg">
                <div class="map-container">
                    <div class="map-header">
                        <h2><i class="fas fa-map"></i> Interactive Map</h2>
                        <div class="map-controls">
                            <button class="btn btn-sm btn-outline-secondary" id="map-layers-btn">
                                <i class="fas fa-layers"></i> Layers
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" id="map-tools-btn">
                                <i class="fas fa-tools"></i> Tools
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" id="map-export-btn">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <div id="map-placeholder" class="map-placeholder">
                        <div class="map-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading map component...</p>
                        </div>
                    </div>
                    
                    <!-- Map Sidebar -->
                    <div id="map-sidebar" class="map-sidebar">
                        <div class="sidebar-header">
                            <h4>Map Layers</h4>
                            <button class="sidebar-close" id="sidebar-close">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="sidebar-content">
                            <div class="layer-list" id="layer-list">
                                <!-- Layers will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Download View -->
            <div id="download-view" class="view-content theme-animated-bg">
                <div class="download-container">
                    <div class="download-header">
                        <h2><i class="fas fa-download"></i> Enhanced Download Manager</h2>
                        <div class="download-status" id="download-status">
                            <span class="status-indicator ready">Ready</span>
                        </div>
                    </div>
                    
                    <div class="download-help">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <strong>Required Fields:</strong> Please fill in the Area of Interest, Date Range, and Sensor selection to start a download. Fields marked with <span class="required-indicator">*</span> are required.
                        </div>
                    </div>
                    
                    <div class="download-form">
                        <div class="form-row">
                            <!-- Area of Interest -->
                            <div class="form-section">
                                <h3>Area of Interest <span class="required-indicator">*</span></h3>
                                <div class="input-group">
                                    <label for="aoi-input">Enter coordinates or GeoJSON:</label>
                                    <div class="input-row">
                                        <input id="aoi-input" type="text" class="form-control" 
                                               placeholder="[minLon, minLat, maxLon, maxLat] or GeoJSON" required>
                                        <button id="map-selector-btn" class="btn btn-outline-secondary" title="Open map selector">
                                            <i class="fas fa-map"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Date Range -->
                            <div class="form-section">
                                <h3>Date Range <span class="required-indicator">*</span></h3>
                                <div class="input-group">
                                    <label for="start-date">Start Date:</label>
                                    <div class="input-row">
                                        <input id="start-date" type="date" class="form-control" required>
                                        <button class="btn btn-outline-secondary calendar-btn" data-target="#start-date">
                                            <i class="fas fa-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="end-date">End Date:</label>
                                    <div class="input-row">
                                        <input id="end-date" type="date" class="form-control" required>
                                        <button class="btn btn-outline-secondary calendar-btn" data-target="#end-date">
                                            <i class="fas fa-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <!-- Sensor Selection -->
                            <div class="form-section">
                                <h3>Sensor <span class="required-indicator">*</span></h3>
                                <div class="input-group">
                                    <label for="sensor-select">Select Sensor:</label>
                                    <select id="sensor-select" class="form-select" required>
                                        <option value="">Choose a sensor...</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Output Directory -->
                            <div class="form-section">
                                <h3>Output Directory</h3>
                                <div class="input-group">
                                    <div class="input-row">
                                        <input id="output-dir" type="text" class="form-control" 
                                               placeholder="Choose output directory">
                                        <button id="browse-btn" class="btn btn-outline-secondary">Browse...</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <!-- Cloud Settings -->
                            <div class="form-section">
                                <h3>Cloud Settings</h3>
                                <div class="input-group">
                                    <div class="form-check">
                                        <input type="checkbox" id="cloud-mask" class="form-check-input">
                                        <label for="cloud-mask" class="form-check-label">Apply Cloud Mask</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="cloud-cover">Max Cloud Cover (%):</label>
                                    <input id="cloud-cover" type="range" class="form-range" min="0" max="100" value="20">
                                    <span id="cloud-cover-value">20%</span>
                                </div>
                            </div>

                            <!-- Resolution Settings -->
                            <div class="form-section">
                                <h3>Resolution Settings</h3>
                                <div class="input-group">
                                    <div class="form-check">
                                        <input type="checkbox" id="best-res" class="form-check-input" checked>
                                        <label for="best-res" class="form-check-label">Use Highest Resolution</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="target-res">Target Resolution (m):</label>
                                    <input id="target-res" type="number" class="form-control" min="1" max="1000" value="30" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <!-- Advanced Settings -->
                            <div class="form-section">
                                <h3>Advanced Settings</h3>
                                <div class="input-group">
                                    <label for="tiling-method">Tiling Method:</label>
                                    <select id="tiling-method" class="form-select">
                                        <option value="degree">Degree</option>
                                        <option value="pixel">Pixel</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="format-select">Output Format:</label>
                                    <select id="format-select" class="form-select">
                                        <option value="geotiff">GeoTIFF</option>
                                        <option value="netcdf">NetCDF</option>
                                        <option value="hdf">HDF</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Processing Options -->
                            <div class="form-section">
                                <h3>Processing Options</h3>
                                <div class="input-group">
                                    <div class="form-check">
                                        <input type="checkbox" id="apply-corrections" class="form-check-input">
                                        <label for="apply-corrections" class="form-check-label">Apply Atmospheric Corrections</label>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <div class="form-check">
                                        <input type="checkbox" id="generate-indices" class="form-check-input">
                                        <label for="generate-indices" class="form-check-label">Generate Vegetation Indices</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Download Actions -->
                        <div class="download-actions">
                            <button id="start-download-btn" class="btn btn-primary btn-lg">
                                <i class="fas fa-download"></i> Start Download
                            </button>
                            <button id="validate-params-btn" class="btn btn-outline-secondary">
                                <i class="fas fa-check"></i> Validate Parameters
                            </button>
                            <button id="save-preset-btn" class="btn btn-outline-info">
                                <i class="fas fa-save"></i> Save Preset
                            </button>
                            <button id="fill-sample-data" class="btn btn-outline-warning">
                                <i class="fas fa-magic"></i> Fill Sample Data
                            </button>
                        </div>

                        <!-- Download Progress -->
                        <div class="download-progress" id="download-progress-section" style="display: none;">
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="download-progress-fill" class="progress-fill" style="width: 0%"></div>
                                </div>
                                <div id="download-status-text" class="download-status">
                                    <span id="download-spinner" class="spinner" style="display:none;"></span>
                                    Ready
                                </div>
                            </div>
                        </div>

                        <!-- Download Log -->
                        <div class="form-section">
                            <h3>Download Log</h3>
                            <div class="download-log">
                                <textarea id="download-log" readonly placeholder="Waiting for download..." class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Satellite Info View -->
            <div id="satelliteInfo-view" class="view-content theme-animated-bg">
                <div class="satellite-info-container">
                    <!-- Header Section -->
                    <div class="satellite-header">
                        <div class="header-content">
                            <h2><i class="fas fa-satellite"></i> Satellite Catalog</h2>
                            <p class="description">Explore Earth observation satellites and their capabilities. Get real-time data from Google Earth Engine.</p>
                        </div>
                        <div class="header-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="total-satellites">0</span>
                                <span class="stat-label">Satellites</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="total-datasets">0</span>
                                <span class="stat-label">Datasets</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="last-updated">-</span>
                                <span class="stat-label">Last Updated</span>
                            </div>
                        </div>
                    </div>

                    <!-- Subtab Navigation -->
                    <div class="subtab-navigation">
                        <button class="subtab-btn active" data-subtab="satellites">
                            <i class="fas fa-satellite"></i>
                            <span>Satellites</span>
                        </button>
                        <button class="subtab-btn" data-subtab="crawler">
                            <i class="fas fa-spider"></i>
                            <span>Web Crawler</span>
                        </button>
                        <button class="subtab-btn" data-subtab="datasets">
                            <i class="fas fa-chart-bar"></i>
                            <span>Dataset Viewer</span>
                        </button>
                    </div>

                    <!-- Satellites Subtab -->
                    <div id="satellites-subtab" class="subtab-content active">
                        <!-- Satellite Grid -->
                        <div class="satellite-grid-container">
                            <div class="grid-header">
                                <h3>Available Satellites</h3>
                                <div class="grid-controls">
                                    <button class="view-toggle active" data-view="grid">
                                        <span class="toggle-icon"><i class="fas fa-th"></i></span>
                                    </button>
                                    <button class="view-toggle" data-view="list">
                                        <span class="toggle-icon"><i class="fas fa-list"></i></span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="satellite-grid" id="satellite-grid">
                                <!-- Satellites will be populated here -->
                            </div>
                        </div>

                        <!-- Satellite Details Panel -->
                        <div class="satellite-details-panel" id="satellite-details-panel">
                            <div class="panel-header">
                                <h3>Satellite Details</h3>
                                <button class="close-panel" id="close-details"><i class="fas fa-times"></i></button>
                            </div>
                            
                            <div class="panel-content">
                                <div class="satellite-hero">
                                    <div class="satellite-basic-info">
                                        <h2 id="detail-satellite-name">Select a Satellite</h2>
                                        <div class="satellite-tags" id="satellite-tags">
                                            <!-- Tags will be populated here -->
                                        </div>
                                        <div class="satellite-stats">
                                            <div class="stat">
                                                <span class="stat-value" id="detail-resolution">-</span>
                                                <span class="stat-label">Resolution</span>
                                            </div>
                                            <div class="stat">
                                                <span class="stat-value" id="detail-datasets">-</span>
                                                <span class="stat-label">Datasets</span>
                                            </div>
                                            <div class="stat">
                                                <span class="stat-value" id="detail-status">-</span>
                                                <span class="stat-label">Status</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="satellite-sections">
                                    <div class="section">
                                        <h4><i class="fas fa-info-circle"></i> Overview</h4>
                                        <p id="detail-description">Select a satellite to view its description and capabilities.</p>
                                    </div>

                                    <div class="section">
                                        <h4><i class="fas fa-bullseye"></i> Applications</h4>
                                        <div class="applications-grid" id="detail-applications">
                                            <!-- Applications will be populated here -->
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h4><i class="fas fa-chart-bar"></i> Bands & Sensors</h4>
                                        <div class="bands-grid" id="detail-bands">
                                            <!-- Bands will be populated here -->
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h4><i class="fas fa-code"></i> Earth Engine Code</h4>
                                        <div class="code-section" id="detail-code">
                                            <div class="code-header">
                                                <span>Ready-to-use code snippet</span>
                                                <button class="copy-code-btn" id="copy-code-btn">
                                                    <span class="copy-icon"><i class="fas fa-copy"></i></span>
                                                    <span class="copy-text">Copy</span>
                                                </button>
                                            </div>
                                            <pre class="code-block" id="code-block"><code>Select a satellite to view its Earth Engine code snippet.</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="satellite-actions">
                                    <button class="action-btn primary" id="use-for-download">
                                        <span class="action-icon"><i class="fas fa-download"></i></span>
                                        <span class="action-text">Use for Download</span>
                                    </button>
                                    <button class="action-btn secondary" id="share-satellite">
                                        <span class="action-icon"><i class="fas fa-share"></i></span>
                                        <span class="action-text">Share</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Web Crawler Subtab -->
                    <div id="crawler-subtab" class="subtab-content">
                        <!-- Web Crawler Dashboard -->
                        <div class="crawler-dashboard">
                            <div class="dashboard-header">
                                <h3><i class="fas fa-spider"></i> Google Earth Engine Data Crawler</h3>
                                <div class="dashboard-status">
                                    <span class="status-dot" id="status-dot"></span>
                                    <span id="crawler-status" class="status-text">Ready to collect satellite data</span>
                                </div>
                            </div>
                            
                            <!-- Enhanced Crawler Info -->
                            <div class="crawler-info-panel">
                                <div class="info-alert">
                                    <div class="alert-icon"><i class="fas fa-info-circle"></i></div>
                                    <div class="alert-content">
                                        <h4>First Time Setup</h4>
                                        <p>Click "Run Web Crawler" to collect satellite data from Google Earth Engine. This will download comprehensive information about available satellites, sensors, and datasets.</p>
                                        <ul>
                                            <li><i class="fas fa-chart-bar"></i> Collects dataset information from Earth Engine catalog</li>
                                            <li><i class="fas fa-satellite"></i> Extracts satellite details and capabilities</li>
                                            <li><i class="fas fa-code"></i> Generates ready-to-use Earth Engine code snippets</li>
                                            <li><i class="fas fa-clock"></i> Takes 2-5 minutes depending on connection speed</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dashboard-content">
                                <div class="crawler-info">
                                    <div class="info-card">
                                        <div class="info-icon"><i class="fas fa-chart-bar"></i></div>
                                        <div class="info-content">
                                            <h4>Data Source</h4>
                                            <p>Google Earth Engine Catalog</p>
                                        </div>
                                    </div>
                                    <div class="info-card">
                                        <div class="info-icon"><i class="fas fa-sync"></i></div>
                                        <div class="info-content">
                                            <h4>Update Frequency</h4>
                                            <p>On-demand</p>
                                        </div>
                                    </div>
                                    <div class="info-card">
                                        <div class="info-icon"><i class="fas fa-hdd"></i></div>
                                        <div class="info-content">
                                            <h4>Storage</h4>
                                            <p>Local JSON + Thumbnails</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="crawler-actions">
                                    <div class="primary-action">
                                        <button id="run-web-crawler" class="crawler-btn primary large" type="button">
                                            <span class="btn-icon"><i class="fas fa-spider"></i></span>
                                            <span class="btn-text">Start Data Collection</span>
                                            <span class="btn-subtitle">Collect satellite data from Earth Engine</span>
                                        </button>
                                    </div>
                                    <div class="secondary-actions">
                                        <button id="cancel-web-crawler" class="crawler-btn danger" disabled>
                                            <span class="btn-icon"><i class="fas fa-times"></i></span>
                                            <span class="btn-text">Stop Collection</span>
                                        </button>
                                        <button id="refresh-crawler-data" class="crawler-btn secondary">
                                            <span class="btn-icon"><i class="fas fa-sync"></i></span>
                                            <span class="btn-text">Refresh Data</span>
                                        </button>
                                        <button id="view-crawler-log" class="crawler-btn secondary">
                                            <span class="btn-icon"><i class="fas fa-list"></i></span>
                                            <span class="btn-text">View Log</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Enhanced Progress Display -->
                            <div id="crawler-progress" class="crawler-progress" style="display: none;">
                                <div class="progress-header">
                                    <h4><i class="fas fa-sync-alt"></i> Data Collection in Progress</h4>
                                    <div class="progress-info">
                                        <span class="progress-percentage" id="progress-percentage">0%</span>
                                        <span class="progress-time" id="progress-time">Starting...</span>
                                    </div>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div id="crawler-progress-fill" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <div class="progress-steps">
                                        <div class="step" data-step="init">
                                            <span class="step-icon"><i class="fas fa-rocket"></i></span>
                                            <span class="step-text">Initialize</span>
                                        </div>
                                        <div class="step" data-step="connect">
                                            <span class="step-icon"><i class="fas fa-globe"></i></span>
                                            <span class="step-text">Connect</span>
                                        </div>
                                        <div class="step" data-step="fetch">
                                            <span class="step-icon"><i class="fas fa-broadcast-tower"></i></span>
                                            <span class="step-text">Fetch Data</span>
                                        </div>
                                        <div class="step" data-step="process">
                                            <span class="step-icon"><i class="fas fa-cogs"></i></span>
                                            <span class="step-text">Process</span>
                                        </div>
                                        <div class="step" data-step="download">
                                            <span class="step-icon"><i class="fas fa-download"></i></span>
                                            <span class="step-text">Download</span>
                                        </div>
                                        <div class="step" data-step="save">
                                            <span class="step-icon"><i class="fas fa-save"></i></span>
                                            <span class="step-text">Save</span>
                                        </div>
                                    </div>
                                </div>
                                <div id="crawler-message" class="crawler-message">Initializing web crawler...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Dataset Viewer Subtab -->
                    <div id="datasets-subtab" class="subtab-content">
                        <!-- Dataset Viewer Section -->
                        <div id="dataset-viewer" class="dataset-viewer">
                            <div class="dataset-viewer-header">
                                <h3><i class="fas fa-chart-bar"></i> Extracted Dataset Information</h3>
                                <div class="dataset-summary">
                                    <div class="summary-item">
                                        <span class="summary-number" id="total-datasets">0</span>
                                        <span class="summary-label">Total Datasets</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-number" id="processed-datasets">0</span>
                                        <span class="summary-label">Processed</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-number" id="unique-publishers">0</span>
                                        <span class="summary-label">Publishers</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-number" id="total-satellites">0</span>
                                        <span class="summary-label">Satellites</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Dataset Controls -->
                            <div class="dataset-controls">
                                <div class="dataset-search">
                                    <div class="search-box">
                                        <span class="search-icon"><i class="fas fa-search"></i></span>
                                        <input id="dataset-search" type="text" placeholder="Search datasets by name, description, or tags...">
                                        <button class="clear-search" id="clear-dataset-search"><i class="fas fa-times"></i></button>
                                    </div>
                                </div>
                                
                                <div class="dataset-filters">
                                    <select id="publisher-filter" class="filter-select">
                                        <option value="">All Publishers</option>
                                    </select>
                                    <select id="satellite-filter" class="filter-select">
                                        <option value="">All Satellites</option>
                                    </select>
                                    <select id="data-type-filter" class="filter-select">
                                        <option value="">All Data Types</option>
                                    </select>
                                    <button id="clear-filters" class="clear-filters-btn">Clear Filters</button>
                                </div>
                            </div>

                            <!-- Dataset Grid -->
                            <div class="dataset-grid-container">
                                <div class="grid-header">
                                    <h4>Available Datasets</h4>
                                    <div class="grid-controls">
                                        <button class="view-toggle active" data-view="grid" id="grid-view-btn">
                                            <span class="toggle-icon"><i class="fas fa-th"></i></span>
                                        </button>
                                        <button class="view-toggle" data-view="list" id="list-view-btn">
                                            <span class="toggle-icon"><i class="fas fa-list"></i></span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="dataset-grid" id="dataset-grid">
                                    <!-- Datasets will be populated here -->
                                </div>
                            </div>

                            <!-- Dataset Details Panel -->
                            <div class="dataset-details-panel" id="dataset-details-panel">
                                <div class="panel-header">
                                    <h3>Dataset Details</h3>
                                    <button class="close-panel" id="close-dataset-details"><i class="fas fa-times"></i></button>
                                </div>
                                
                                <div class="panel-content">
                                    <div class="dataset-hero">
                                        <div class="dataset-basic-info">
                                            <h2 id="dataset-name">Dataset Name</h2>
                                            <p id="dataset-description">Dataset description will appear here...</p>
                                        </div>
                                        <div class="dataset-thumbnail">
                                            <img id="dataset-thumbnail-img" src="" alt="Dataset thumbnail">
                                        </div>
                                    </div>
                                    
                                    <div class="dataset-info-grid">
                                        <div class="info-section">
                                            <h4><i class="fas fa-info-circle"></i> Basic Information</h4>
                                            <div class="info-item">
                                                <span class="info-label">Dataset ID:</span>
                                                <span class="info-value" id="dataset-id">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Collection ID:</span>
                                                <span class="info-value" id="collection-id">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Publisher:</span>
                                                <span class="info-value" id="dataset-publisher">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Resolution:</span>
                                                <span class="info-value" id="dataset-resolution">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Data Type:</span>
                                                <span class="info-value" id="dataset-data-type">-</span>
                                            </div>
                                        </div>
                                        
                                        <div class="info-section">
                                            <h4><i class="fas fa-satellite"></i> Satellite Information</h4>
                                            <div class="info-item">
                                                <span class="info-label">Satellites:</span>
                                                <div class="info-value" id="dataset-satellites">-</div>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Coverage:</span>
                                                <span class="info-value" id="dataset-coverage">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Frequency:</span>
                                                <span class="info-value" id="dataset-frequency">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Cloud Cover:</span>
                                                <span class="info-value" id="dataset-cloud-cover">-</span>
                                            </div>
                                        </div>
                                        
                                        <div class="info-section">
                                            <h4><i class="fas fa-calendar"></i> Temporal Information</h4>
                                            <div class="info-item">
                                                <span class="info-label">Date Range:</span>
                                                <span class="info-value" id="dataset-dates">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Start Date:</span>
                                                <span class="info-value" id="dataset-start-date">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">End Date:</span>
                                                <span class="info-value" id="dataset-end-date">-</span>
                                            </div>
                                        </div>
                                        
                                        <div class="info-section">
                                            <h4><i class="fas fa-tags"></i> Tags & Categories</h4>
                                            <div class="info-item">
                                                <span class="info-label">Tags:</span>
                                                <div class="info-value" id="dataset-tags">-</div>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Applications:</span>
                                                <div class="info-value" id="dataset-applications">-</div>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Limitations:</span>
                                                <span class="info-value" id="dataset-limitations">-</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="dataset-actions">
                                        <div class="action-section">
                                            <h4><i class="fas fa-code"></i> Earth Engine Code</h4>
                                            <div class="code-snippet-container">
                                                <pre id="dataset-code-snippet" class="code-snippet">// Earth Engine code will appear here...</pre>
                                                <button class="copy-code-btn" id="copy-code-btn"><i class="fas fa-copy"></i> Copy Code</button>
                                            </div>
                                        </div>
                                        
                                        <div class="action-section">
                                            <h4><i class="fas fa-link"></i> Links & Downloads</h4>
                                            <div class="action-buttons">
                                                <a id="dataset-download-link" href="#" target="_blank" class="action-btn primary">
                                                    <span class="btn-icon"><i class="fas fa-globe"></i></span>
                                                    <span class="btn-text">View in Earth Engine</span>
                                                </a>
                                                <button class="action-btn secondary" id="use-for-download-btn">
                                                    <span class="btn-icon"><i class="fas fa-download"></i></span>
                                                    <span class="btn-text">Use for Download</span>
                                                </button>
                                                <button class="action-btn secondary" id="add-to-bookmarks-btn">
                                                    <span class="btn-icon"><i class="fas fa-bookmark"></i></span>
                                                    <span class="btn-text">Add to Bookmarks</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Crawler Console and Bottom Progress Bar (hidden by default) -->
                    <div id="crawler-bottom-bar" class="crawler-bottom-bar" style="display: none;">
                        <div class="crawler-bottom-left">
                            <div class="crawler-console-section">
                                <div class="console-label">Crawler Console</div>
                                <pre id="crawler-console" class="crawler-console"></pre>
                            </div>
                            <div class="crawler-progress-section">
                                <div class="progress-label">Progress</div>
                                <div class="bottom-progress-bar">
                                    <div id="crawler-bottom-progress" class="bottom-progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="crawler-bottom-right">
                            <div class="graph-label">Speed (datasets/sec)</div>
                            <canvas id="crawler-speed-graph" width="220" height="60" style="background: #181c24; border-radius: 8px;"></canvas>
                        </div>
                    </div>

                    <!-- Download Console and Bottom Progress Bar (hidden by default) -->
                    <div id="download-bottom-bar" class="download-bottom-bar" style="display: none;">
                        <div class="download-bottom-left">
                            <div class="download-console-section">
                                <div class="console-label">Download Console</div>
                                <pre id="download-console" class="download-console"></pre>
                            </div>
                            <div class="download-progress-section">
                                <div class="progress-label">Download Progress</div>
                                <div class="bottom-progress-bar">
                                    <div id="download-bottom-progress" class="bottom-progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="download-bottom-right">
                            <div class="graph-label">Speed (MB/s)</div>
                            <canvas id="download-speed-graph" width="220" height="60" style="background: #181c24; border-radius: 8px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Progress View -->
            <div id="progress-view" class="view-content theme-animated-bg">
                <div class="progress-container">
                    <div class="progress-header">
                        <h2><i class="fas fa-tasks"></i> Download Progress</h2>
                        <div class="progress-controls">
                            <button class="btn btn-sm btn-outline-secondary" id="refresh-progress-btn">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                            <button class="btn btn-sm btn-outline-danger" id="clear-completed-btn">
                                <i class="fas fa-trash"></i> Clear Completed
                            </button>
                        </div>
                    </div>
                    
                    <div class="progress-content">
                        <div class="progress-summary">
                            <div class="summary-card">
                                <h4>Active Downloads</h4>
                                <span id="active-count" class="summary-value">0</span>
                            </div>
                            <div class="summary-card">
                                <h4>Completed</h4>
                                <span id="completed-count" class="summary-value">0</span>
                            </div>
                            <div class="summary-card">
                                <h4>Failed</h4>
                                <span id="failed-count" class="summary-value">0</span>
                            </div>
                        </div>
                        
                        <div class="progress-list" id="progress-list">
                            <!-- Progress items will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Settings View -->
            <div id="settings-view" class="view-content theme-animated-bg">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2><i class="fas fa-cog"></i> Settings</h2>
                    </div>
                    
                    <div class="settings-content">
                        <div class="settings-tabs">
                            <button class="settings-tab active" data-tab="general">
                                <i class="fas fa-cog"></i> General
                            </button>
                            <button class="settings-tab" data-tab="downloads">
                                <i class="fas fa-download"></i> Downloads
                            </button>
                            <button class="settings-tab" data-tab="appearance">
                                <i class="fas fa-palette"></i> Appearance
                            </button>
                            <button class="settings-tab" data-tab="advanced">
                                <i class="fas fa-tools"></i> Advanced
                            </button>
                        </div>
                        
                        <div class="settings-panels">
                            <!-- General Settings -->
                            <div class="settings-panel active" id="general-panel">
                                <h3>General Settings</h3>
                                <div class="setting-group">
                                    <label for="default-output-dir">Default Output Directory:</label>
                                    <div class="input-row">
                                        <input type="text" id="default-output-dir" class="form-control">
                                        <button class="btn btn-outline-secondary">Browse</button>
                                    </div>
                                </div>
                                <div class="setting-group">
                                    <label for="auto-save">Auto-save settings:</label>
                                    <div class="form-check">
                                        <input type="checkbox" id="auto-save" class="form-check-input" checked>
                                        <label for="auto-save" class="form-check-label">Enable auto-save</label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Download Settings -->
                            <div class="settings-panel" id="downloads-panel">
                                <h3>Download Settings</h3>
                                <div class="setting-group">
                                    <label for="max-concurrent">Max Concurrent Downloads:</label>
                                    <input type="number" id="max-concurrent" class="form-control" min="1" max="10" value="3">
                                </div>
                                <div class="setting-group">
                                    <label for="download-timeout">Download Timeout (minutes):</label>
                                    <input type="number" id="download-timeout" class="form-control" min="5" max="120" value="30">
                                </div>
                            </div>
                            
                            <!-- Appearance Settings -->
                            <div class="settings-panel" id="appearance-panel">
                                <h3>Appearance Settings</h3>
                                
                                <!-- Theme Selection -->
                                <div class="setting-group">
                                    <h4>Theme Selection</h4>
                                    <div class="theme-selection">
                                        <!-- Theme Category Tabs -->
                                        <div id="theme-tab-container"></div>
                                        <!-- Theme Grid: Show filtered themes -->
                                        <div id="theme-grid" class="theme-grid">
                                            <!-- All themes will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Theme Options -->
                                <div class="setting-group">
                                    <h4>Theme Options</h4>
                                    <div class="theme-options">
                                        <div class="form-check">
                                            <input type="checkbox" id="use-character-catchphrases" class="form-check-input">
                                            <label for="use-character-catchphrases" class="form-check-label">Use Character Catchphrases</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="show-special-icons" class="form-check-input">
                                            <label for="show-special-icons" class="form-check-label">Show Special Icons</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="enable-animated-background" class="form-check-input">
                                            <label for="enable-animated-background" class="form-check-label">Enable Animated Backgrounds</label>
                                        </div>
                                        <div class="setting-group">
                                            <label for="toolbar-animation-select">Toolbar Animation:</label>
                                            <select id="toolbar-animation-select" class="form-select">
                                                <option value="glow">Glow (Default)</option>
                                                <option value="bounce">Bounce</option>
                                                <option value="slide">Slide</option>
                                                <option value="pulse">Pulse</option>
                                                <option value="spin">Spin</option>
                                                <option value="flip">Flip</option>
                                                <option value="shake">Shake</option>
                                                <option value="wiggle">Wiggle</option>
                                                <option value="color">Color Shift</option>
                                                <option value="fade">Fade</option>
                                                <option value="pop">Pop</option>
                                                <option value="rubber">Rubber Band</option>
                                                <option value="swing">Swing</option>
                                                <option value="rotate">Rotate</option>
                                                <option value="none">None</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="setting-group">
                                    <label for="font-size">Font Size:</label>
                                    <input type="range" id="font-size" class="form-range" min="12" max="20" value="14">
                                    <span id="font-size-value">14px</span>
                                </div>
                            </div>
                            
                            <!-- Advanced Settings -->
                            <div class="settings-panel" id="advanced-panel">
                                <h3>Advanced Settings</h3>
                                <div class="setting-group">
                                    <label for="debug-mode">Debug Mode:</label>
                                    <div class="form-check">
                                        <input type="checkbox" id="debug-mode" class="form-check-input">
                                        <label for="debug-mode" class="form-check-label">Enable debug logging</label>
                                    </div>
                                </div>
                                <div class="setting-group">
                                    <button class="btn btn-outline-warning" id="clear-cache-btn">
                                        <i class="fas fa-broom"></i> Clear Cache
                                    </button>
                                    <button class="btn btn-outline-danger" id="reset-settings-btn">
                                        <i class="fas fa-undo"></i> Reset Settings
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other views will be added here -->
            <div id="indexAnalysis-view" class="view-content theme-animated-bg">
                <div class="analysis-container">
                    <h2><i class="fas fa-chart-line"></i> Index Analysis</h2>
                    <p>Advanced analysis tools coming soon...</p>
                </div>
            </div>

            <div id="vectorDownload-view" class="view-content theme-animated-bg">
                <div class="vector-container">
                    <h2><i class="fas fa-vector-square"></i> Vector Download</h2>
                    <p>Vector data download tools coming soon...</p>
                </div>
            </div>

            <div id="dataViewer-view" class="view-content theme-animated-bg">
                <div class="viewer-container">
                    <h2><i class="fas fa-table"></i> Data Viewer</h2>
                    <p>Data visualization tools coming soon...</p>
                </div>
            </div>

            <div id="about-view" class="view-content theme-animated-bg">
                <div class="about-container">
                    <h2><i class="fas fa-info-circle"></i> About Flutter Earth</h2>
                    <div class="about-content">
                        <p>Flutter Earth v2.0 is an enhanced Earth observation platform that provides advanced tools for satellite data analysis and visualization.</p>
                        <div class="version-info">
                            <p><strong>Version:</strong> 2.0.0</p>
                            <p><strong>Build Date:</strong> <span id="build-date">2024-01-01</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Side Panels -->
        <div id="side-panels" class="side-panels">
            <!-- Toolbox Panel -->
            <div id="toolbox-panel" class="side-panel">
                <div class="panel-header">
                    <h4><i class="fas fa-toolbox"></i> Toolbox</h4>
                    <button class="panel-close" data-panel="toolbox">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <div class="tool-list">
                        <div class="tool-item" data-tool="measure">
                            <i class="fas fa-ruler"></i>
                            <span>Measure Distance</span>
                        </div>
                        <div class="tool-item" data-tool="area">
                            <i class="fas fa-vector-square"></i>
                            <span>Calculate Area</span>
                        </div>
                        <div class="tool-item" data-tool="profile">
                            <i class="fas fa-chart-line"></i>
                            <span>Elevation Profile</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bookmarks Panel -->
            <div id="bookmarks-panel" class="side-panel">
                <div class="panel-header">
                    <h4><i class="fas fa-bookmark"></i> Bookmarks</h4>
                    <button class="panel-close" data-panel="bookmarks">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <div class="bookmark-list" id="bookmark-list">
                        <!-- Bookmarks will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Attribute Table Panel -->
            <div id="attributeTable-panel" class="side-panel">
                <div class="panel-header">
                    <h4><i class="fas fa-list-alt"></i> Attribute Table</h4>
                    <button class="panel-close" data-panel="attributeTable">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <div class="attribute-table" id="attribute-table">
                        <!-- Attribute table will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Modals -->
        <div id="modals" class="modals">
            <!-- Help Modal -->
            <div id="help-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-question-circle"></i> Help & Documentation</h3>
                        <button class="modal-close" data-modal="help-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="help-content">
                            <h4>Getting Started</h4>
                            <p>Welcome to Flutter Earth v2.0! This enhanced platform provides advanced tools for Earth observation data analysis.</p>
                            
                            <h4>Key Features</h4>
                            <ul>
                                <li><strong>Interactive Mapping:</strong> Explore satellite imagery with advanced visualization tools</li>
                                <li><strong>Data Download:</strong> Download satellite data with customizable parameters</li>
                                <li><strong>Analysis Tools:</strong> Perform advanced analysis on satellite imagery</li>
                                <li><strong>Processing Pipeline:</strong> Automated data processing and analysis workflows</li>
                            </ul>
                            
                            <h4>Quick Start</h4>
                            <ol>
                                <li>Select the Map tool to start exploring</li>
                                <li>Use the Download tool to get satellite data</li>
                                <li>Configure your analysis parameters</li>
                                <li>Monitor progress in the Progress panel</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Selector Modal -->
            <div id="map-selector-modal" class="modal">
                <div class="modal-content large">
                    <div class="modal-header">
                        <h3><i class="fas fa-map"></i> Map Selector</h3>
                        <button class="modal-close" data-modal="map-selector-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="map-selector-content">
                            <div class="selector-instructions">
                                <p>Draw a rectangle on the map to select your area of interest, or enter coordinates manually.</p>
                            </div>
                            <div class="map-selector-map" id="map-selector-map">
                                <!-- Map will be loaded here -->
                            </div>
                            <div class="selector-controls">
                                <button class="btn btn-primary" id="confirm-selection">Confirm Selection</button>
                                <button class="btn btn-outline-secondary" id="clear-selection">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Container -->
        <div id="notifications" class="notifications"></div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <div id="loading-message">Loading...</div>
            </div>
        </div>

        <!-- Authentication Modal -->
        <div id="auth-modal" class="modal">
            <div class="modal-content auth-modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-lock"></i> Google Earth Engine Authentication</h3>
                    <button class="modal-close" id="auth-modal-close"><i class="fas fa-times"></i></button>
                </div>
                
                <div class="modal-body">
                    <div class="auth-status-section">
                        <div id="auth-status-indicator" class="auth-status-indicator">
                            <span class="status-icon"><i class="fas fa-clock"></i></span>
                            <span class="status-text">Checking authentication...</span>
                        </div>
                    </div>
                    
                    <div class="auth-form">
                        <div class="auth-section">
                            <h4><i class="fas fa-file-upload"></i> Service Account Key File</h4>
                            <p class="auth-help-text">Upload your Google Cloud service account JSON key file</p>
                            <div class="input-group">
                                <label for="auth-key-file">Key File:</label>
                                <div class="file-input-wrapper">
                                    <input id="auth-key-file" type="file" accept=".json" class="file-input">
                                    <div class="file-input-display">
                                        <span id="key-file-name" class="file-name">Choose a JSON file...</span>
                                        <button type="button" class="file-browse-btn">Browse</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="auth-section">
                            <h4><i class="fas fa-project-diagram"></i> Google Cloud Project</h4>
                            <p class="auth-help-text">Enter your Google Cloud project ID</p>
                            <div class="input-group">
                                <label for="auth-project-id">Project ID:</label>
                                <input id="auth-project-id" type="text" placeholder="your-project-id" class="form-control">
                            </div>
                        </div>
                        
                        <div class="auth-section">
                            <h4><i class="fas fa-question-circle"></i> Authentication Help</h4>
                            <div class="auth-help-content">
                                <p><strong>To get your credentials:</strong></p>
                                <ol>
                                    <li>Go to <a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a></li>
                                    <li>Create a new project or select existing one</li>
                                    <li>Enable Earth Engine API</li>
                                    <li>Create a service account and download the JSON key</li>
                                    <li>Upload the JSON file and enter your project ID above</li>
                                </ol>
                                
                                <div style="margin-top: 1rem; padding: 0.75rem; background: var(--info-bg); border-radius: var(--radius-sm); border-left: 3px solid var(--info-color);">
                                    <p style="margin: 0; font-weight: 500; color: var(--info-color);">
                                        <i class="fas fa-info-circle"></i> <strong>Existing Setup Detected</strong>
                                    </p>
                                    <p style="margin: 0.5rem 0 0 0; font-size: 0.875rem; color: var(--text-subtle);">
                                        The system found existing credentials in <code>C:\FE Auth</code> folder. 
                                        If you have valid credentials there, you can use them directly or upload new ones.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <div class="auth-actions">
                        <button id="auth-test" class="btn btn-outline-secondary">
                            <i class="fas fa-vial"></i> Test Connection
                        </button>
                        <button id="auth-submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save & Connect
                        </button>
                        <button id="auth-clear" class="btn btn-outline-warning">
                            <i class="fas fa-trash"></i> Clear Credentials
                        </button>
                        <button id="auth-offline" class="btn btn-outline-info">
                            <i class="fas fa-wifi-slash"></i> Continue Offline
                        </button>
                        <button id="auth-cancel" class="btn btn-outline-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                    
                    <div class="auth-footer">
                        <p class="auth-note">
                            <i class="fas fa-lightbulb"></i> <strong>Offline Mode:</strong> 
                            You can explore the interface without authentication, but Earth Engine features will be limited.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Additional Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css">

    <!-- Connection Status Menu -->
    <div id="connection-menu" class="toolbar-menu" style="display:none;">
        <div class="menu-content">
            <h4><i class="fas fa-wifi"></i> Connection Status</h4>
            <div id="connection-details"></div>
            <button class="btn btn-outline-primary" id="reconnect-btn"><i class="fas fa-sync"></i> Reconnect</button>
        </div>
    </div>

    <!-- User/Account Menu -->
    <div id="user-menu" class="toolbar-menu" style="display:none;">
        <div class="menu-content">
            <h4><i class="fas fa-user"></i> User Account</h4>
            <div id="user-details"></div>
            <button class="btn btn-outline-secondary" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Log Out</button>
        </div>
    </div>

    <!-- Help Menu -->
    <div id="help-menu" class="toolbar-menu" style="display:none;">
        <div class="menu-content">
            <h4><i class="fas fa-question-circle"></i> Help & Documentation</h4>
            <ul>
                <li><a href="#" id="quickstart-link"><i class="fas fa-rocket"></i> Quick Start Guide</a></li>
                <li><a href="#" id="faq-link"><i class="fas fa-info-circle"></i> FAQ</a></li>
                <li><a href="#" id="support-link"><i class="fas fa-envelope"></i> Contact Support</a></li>
            </ul>
        </div>
    </div>

    <!-- Theme Menu -->
    <div id="theme-menu" class="toolbar-menu" style="display:none;">
        <div class="menu-content">
            <h4><i class="fas fa-palette"></i> Theme Switcher</h4>
            <div id="theme-options">
                <button class="btn btn-outline-primary theme-btn" data-theme="default">Default</button>
                <button class="btn btn-outline-dark theme-btn" data-theme="dark">Dark</button>
                <button class="btn btn-outline-light theme-btn" data-theme="light">Light</button>
            </div>
            <button class="btn btn-outline-success" id="save-theme-btn"><i class="fas fa-save"></i> Save as Default</button>
        </div>
    </div>
</body>
</html> 