(function(_ds){var window=this;var DFa=function(a){return(0,_ds.P)("<tr no-matches><td colspan="+_ds.cv(a.sL)+">No matches</td></tr>")},EFa=function(){return(0,_ds.P)("<li no-matches>No matches</li>")},FFa=function(a){a=a.WM;a=_ds.oI(new _ds.Wr("{RESULTS_COUNT_1,plural,=0{No results}=1{1 result}other{{RESULTS_COUNT_2} results}}"),{RESULTS_COUNT_1:a,RESULTS_COUNT_2:_ds.Q(a)});return(0,_ds.P)('<span class="results-count-text">'+a+"</span>")},GFa=function(){return(0,_ds.P)('<div class="devsite-filter-input-container"></div>')},HFa=
function(){let a;a='<span class="devsite-filter-clear-button hidden" aria-label="'+_ds.av("Clear filter");a=a+'" data-title="'+_ds.av("Clear filter");return(0,_ds.P)(a+'" role="button" tabindex="0"></span>')};var ET=function(a,b,c,d,e){b=b.toLowerCase();if(c||d){var f=e?e:Array.from(a.querySelectorAll("td"));if(!f||f.length===0)return!1;d?a=d===c?f[d-1]:null:c&&f[c-1]&&(a=f[c-1]);f=!0}if(!a)return!1;c=!1;!e||f?c=a.textContent.toLowerCase().includes(b):c=e.length?e.some(g=>g.textContent.toLowerCase().includes(b)):!1;if(!c)for(a=document.createNodeIterator(a,NodeFilter.SHOW_COMMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});e=a.nextNode();)e.nodeValue.toLowerCase().includes(b)&&(c=!0);return c},IFa=function(a){const b=
a.querySelector(".devsite-filter");if(b){const c=document.querySelector(`#${b.getAttribute("data-div")}`);c&&a.appendChild(c);["data-classes","data-div","data-max-rows"].forEach(d=>{b.hasAttribute(d)&&b.removeAttribute(d)});b.classList.remove("devsite-filter")}},JFa=async function(a){a.tc=Array.from(a.querySelectorAll("[results-count-container]"));a.o=a.querySelector("input[type=text]")||document.querySelector(".devsite-filter-input");if(a.o){a.Ba=_ds.tp(HFa);var b=_ds.tp(GFa);_ds.wk(b,a.o);b.appendChild(a.o);
b.appendChild(a.Ba)}let c;if(a.hasAttribute("select-el-container-id")){b=a.getAttribute("select-el-container-id").split(" ");for(var d of b){const f=(b=document.querySelector(`#${d}`))?b.tagName.toUpperCase()==="DEVSITE-SELECT"||b.querySelector("devsite-select"):null;b&&f&&(c||(c=b.querySelector("[selected]")),a.ua.push(b))}a.Ua=a.ua.some(f=>(f=f.querySelector("select"))&&f.multiple)}a.hasAttribute("checkbox-form-id")&&(d=a.getAttribute("checkbox-form-id"),a.j=document.getElementById(d),FT(a),a.ea=
a.j.querySelector(".toggle-all"),a.ra=a.j.querySelector(".select-all"),a.qa=a.j.querySelector(".clear-all"),a.ra&&a.ra.setAttribute("type","button"),a.qa&&a.qa.setAttribute("type","button"));a.m=a.querySelector(".list");if(a.m&&a.m.children.length){a.Xa=!!a.m.querySelector("[rowspan]");a.va=GT(a);a.hasAttribute("hide-if-empty")&&(a.Za="hide");if(a.m.tagName.toUpperCase()==="TBODY"&&a.Za==="notification"){d=Array.from(a.querySelectorAll("th:not(.hidden)"));for(var e of d)a.cb=e.hasAttribute("colspan")?
a.cb+parseInt(e.getAttribute("colspan"),10):a.cb+1}a.Fa=a.Ua?"multi":a.j?"any":"all";a.hasAttribute("match")&&!a.Ua&&(e=a.getAttribute("match").toLowerCase(),e==="all"||e==="any")&&(a.Fa=e);a.j&&(HT(a),(a.ra||a.qa)&&a.Qa(),IT(a))}a.Pa=a.querySelector("devsite-pagination");c&&a.ua.length&&a.va.length&&(await customElements.whenDefined("devsite-select"),a.Ia());a.hasAttribute("sortable")&&(a.Da=Array.from(a.querySelectorAll("th")),a.Da.length&&(e=GT(a),e.length&&(d=parseInt(a.getAttribute("sortable"),
10)||0,JT(a,a.Da[d]),KT(a,e,d),LT(a))));c||IT(a)},MFa=async function(a){a.o&&a.va.length&&(a.Aa.listen(a.o,"keyup",()=>void a.bd.hb()),a.Ba&&a.Aa.listen(a.Ba,["click","keydown"],b=>{b.type!=="click"&&b.keyCode!==13&&b.keyCode!==27||!a.o||(a.o.value="",a.Ia())}));if(a.ua.length&&a.va.length){await customElements.whenDefined("devsite-select");for(const b of a.ua){const c=b.querySelector("ul");c&&a.Aa.listen(c,["click","keypress"],a.Ia);c&&a.j&&(a.ra||a.qa)&&a.Aa.listen(c,["click","keypress"],a.Qa)}}a.j&&
a.va.length&&(a.Aa.listen(a.j,["click","keypress"],b=>{b.target!==a.ra&&b.target!==a.qa||KFa(a,b)}),a.j.querySelectorAll("input[type=checkbox]")&&(a.ea&&MT(a),a.Aa.listen(a.j,"change",b=>{LFa(a,b)})));a.Da.length&&a.va.length&&a.Da.forEach((b,c)=>{a.Aa.listen(b,"click",a.Dc.bind(a,c))})},KFa=function(a,b){const c={category:"Site-Wide Custom Events",action:null,label:`#${a.j.id}`};b=b.target;if(b===a.ra){for(var d of a.ua)if(d.querySelector("select").multiple){const f=d.querySelectorAll("option"),
g=d.querySelectorAll(".devsite-select-item");for(var e of f)_ds.Aj(a,"selected","true",e);for(const h of g)_ds.Aj(a,"data-selected","true",h),_ds.Aj(a,"aria-selected","true",h)}a.ya.forEach(f=>{f.checked=!0});c.action="devsite-filter select-all click"}if(b===a.qa){if(a.ua.length)for(const f of a.ua){d=f.querySelectorAll("option[selected]");e=f.querySelectorAll(".devsite-select-item[data-selected]");for(const g of d)g.removeAttribute("selected");for(const g of e)g.removeAttribute("data-selected"),
_ds.Aj(a,"aria-selected","false",g);a.Ua||_ds.Aj(a,"reset","",f)}a.ya.forEach(f=>{f.checked=!1});c.action="devsite-filter clear-all click"}a.Qa();a.Ia();a.dispatchEvent(_ds.Ze(c))},MT=function(a){const b=a.j.querySelectorAll(":checked:not(.toggle-all)").length;b===a.ya.length?(a.ea.indeterminate=!1,a.ea.checked=!0):b<a.ya.length&&b>0?a.ea.indeterminate=!0:b===0&&(a.ea.indeterminate=!1,a.ea.checked=!1)},LFa=function(a,b){var c=b.target;a.ea&&(c===a.ea?a.ya.forEach(d=>{d.checked=a.ea.checked}):MT(a));
(a.ra||a.qa)&&a.Qa();a.Ia();b=c.checked?"check":"uncheck";c=c===a.ea?"toggle-all":NT(a,c);a.dispatchEvent(_ds.Ze({category:"Site-Wide Custom Events",action:`${"devsite-filter"} checkbox ${b}`,label:`${c} (#${a.j.id})`}))},FT=function(a){a.xa=[];a.o&&a.xa.push({text:a.o.value.trim().toLowerCase(),columnNumber:parseInt(a.o.getAttribute("column"),10)||void 0,wl:"devsite-filter-input"});if(a.ua.length)for(const b of a.ua){const c=b.querySelector("select");if(c){let d=[];if(c.multiple&&c.selectedIndex!==
-1)for(const e of c.options)e.hasAttribute("selected")&&d.push(e);else!c.multiple&&c.selectedIndex!==0&&c.options[c.selectedIndex].hasAttribute("selected")&&d.push(c.options[c.selectedIndex]);d.forEach(e=>{a.xa.push({text:e.value||e.text.trim().toLowerCase(),columnNumber:parseInt(b.getAttribute("column"),10)||void 0,wl:b.id})})}}a.j&&(a.ya=a.j.querySelectorAll("input[type=checkbox]:not(.toggle-all)"),Array.from(a.ya).forEach(b=>{b.checked&&a.xa.push({text:NT(a,b),columnNumber:parseInt(b.getAttribute("column"),
10)||void 0,wl:b.id})}))},HT=function(a){_ds.vk(a.m);if(!a.xa.length&&a.Ua)for(const b of a.va)OT(a,b);else if(a.Fa==="multi"&&(a.Na={},a.xa.forEach(b=>{a.Na[b.wl]?a.Na[b.wl].push(b):a.Na[b.wl]=[b]})),a.Xa)for(const b of a.va)Array.isArray(b)?NFa(a,b):PT(a,b)&&OT(a,b);else for(const b of a.va)PT(a,b)&&OT(a,b)},IT=function(a){if(a.hasAttribute("show-results-count"))for(const b of a.tc)_ds.rp(b,FFa,{WM:a.m.children.length});a.m.children.length?a.removeAttribute("empty"):(a.setAttribute("empty",""),
a.Za!=="hide"&&(a.m.tagName.toUpperCase()==="TBODY"?_ds.rp(a.m,DFa,{sL:a.cb}):a.m.tagName.toUpperCase()==="UL"&&_ds.rp(a.m,EFa)));OFa(a)},QT=function(a){for(const b of a.Da)b.removeAttribute("sort-ascending"),b.removeAttribute("sort-descending")},LT=function(a){a.Pa&&(a.Pa.hasAttribute("reset")?a.Pa.removeAttribute("reset"):a.Pa.setAttribute("reset",""))},GT=function(a){const b=Array.from(a.m.children);if(a.Xa)for(const [c,d]of b.entries())d.tagName.toUpperCase()==="TR"&&d.querySelector("[rowspan]")&&
(a=parseInt(d.querySelector("[rowspan]").getAttribute("rowspan"),0)||0,a>0&&b.splice(c,a,b.slice(c,c+a)));return b},JT=function(a,b){b.hasAttribute("sort-ascending")?(QT(a),b.setAttribute("sort-descending",""),a.mb=!0):(QT(a),b.setAttribute("sort-ascending",""),a.mb=!1)},KT=function(a,b,c){b=b.map(d=>{if(!a.Xa)return RT(d,c);if(Array.isArray(d)){var e=d[0]?d[0].querySelector("[rowspan]"):null;if(d.length!==0&&e){var f=Array.from(d[0].querySelectorAll("td")).indexOf(e);if(c===f)return RT(d,c,e);e=
d.map(h=>h.cloneNode(!0));d=e[0].removeChild(e[0].querySelector("[rowspan]"));const g=c>f?1:0;e=e.map(h=>{if(h.querySelectorAll("td")[c-g])return RT(h,c-g)}).filter(Boolean);if(e.length!==0)return ST(a,e),e[0].element.insertBefore(d,e[0].element.querySelectorAll("td")[f]),f=e.map(h=>h.element),d=e.map(h=>h.text).join(""),{element:f,text:d}}}else return RT(d,c)}).filter(Boolean);if(b.length!==0){ST(a,b);_ds.vk(a.m);for(const d of b)if(Array.isArray(d.element))for(const e of d.element)a.m.appendChild(e);
else a.m.appendChild(d.element)}},NT=function(a,b){if(!b)return"";let c=b.getAttribute("value");!c&&b.id&&a.j&&(a=a.j.querySelector(`[for=${b.id}]`))&&(c=a.textContent.trim());return c},PT=function(a,b,c,d){if(a.Fa==="all")return a.xa.every(e=>ET(b,e.text,e.columnNumber,c,d));if(a.Fa==="any")return a.xa.some(e=>ET(b,e.text,e.columnNumber,c,d));if(a.Fa==="multi"){let e=!0;for(const f of Object.keys(a.Na))if(e=!a.Na[f].some(g=>ET(b,g.text,g.columnNumber,c,d)))break;return!e}},OT=function(a,b){if(Array.isArray(b))for(const c of b)TT(a,
c);else TT(a,b)},NFa=function(a,b){const c=b[0]?b[0].querySelector("[rowspan]"):null;if(c&&b.length!==0){var d=Array.from(b[0].querySelectorAll("td")).indexOf(c);if(PT(a,b[0],d+1))OT(a,b);else{var e=0;for(let [g,h]of b.entries())if(b=Array.from(h.querySelectorAll("td")),g!==0&&b.splice(d,0,c),PT(a,h,void 0,b)){e++;if(e===1)if(h=b=h.cloneNode(!0),g===0)var f=b.querySelector("[rowspan]");else f=c.cloneNode(!0),b.insertBefore(f,b.querySelectorAll("td")[d]);f.setAttribute("rowspan",e.toString());OT(a,
h)}}}},OFa=function(a){if(a.Ba){var b,c;((b=a.xa.find(d=>d.wl==="devsite-filter-input"))==null?0:(c=b.text)==null?0:c.length)?a.Ba.classList.remove("hidden"):a.Ba.classList.add("hidden")}},TT=function(a,b){a.hasAttribute("highlight")&&a.o&&(b=PFa(a,b,a.xa[0].text));a.m.appendChild(b)},PFa=function(a,b,c){var d=a.getAttribute("highlight");if(!d.length)return b;d=d.split(",");d=d.map(e=>Array.from(b.querySelectorAll(e))).flat();d=d.filter(e=>e.children.length?Array.from(e.children).every(f=>f.tagName.toUpperCase()===
"MARK"):!0);d.forEach(e=>{let f=_ds.Mk(e);c.length&&(f=f.replace(new RegExp(`(${c})`,"ig"),"<mark>$1</mark>"));_ds.Ef(e,a.ad.jd(f))});return b},RT=function(a,b,c){if(Array.isArray(a))return c?{element:a,text:c.textContent.trim().toLowerCase()}:void 0;if(a.querySelectorAll("td")[b])return{element:a,text:a.querySelectorAll("td")[b].textContent.trim().toLowerCase()}},ST=function(a,b){let c=(e,f)=>e.localeCompare(f);if(a.hasAttribute("sort-comparison")){const e=a.getAttribute("sort-comparison");switch(e){case "lexicographic":break;
case "numeric":c=_ds.rca;break;default:console.warn("Invalid sort comparator for filter: "+e)}}const d=a.mb?-1:1;b.sort((e,f)=>c(e.text,f.text)*d)},UT=class extends _ds.Dj{constructor(){super();this.Aa=new _ds.F(this);this.Rb=!1;this.Ba=this.o=null;this.ua=[];this.xa=[];this.j=null;this.Na={};this.qa=this.ra=this.ea=this.ya=null;this.Fa="";this.Xa=!1;this.ad=_ds.xj(_ds.vj(_ds.wj(new _ds.tj)));this.bd=new _ds.Gg(()=>{this.Ia()},20);this.m=null;this.va=[];this.Za="notification";this.cb=0;this.Da=[];
this.mb=!1;this.Pa=null;this.Ua=!1;this.tc=[];_ds.zj(this,(0,_ds.Pf)`selected`,(0,_ds.Pf)`data-selected`,(0,_ds.Pf)`aria-selected`,(0,_ds.Pf)`reset`)}connectedCallback(){this.Rb||(IFa(this),JFa(this),this.Rb=!0);MFa(this)}disconnectedCallback(){this.Aa.removeAll()}Ia(){FT(this);HT(this);IT(this);this.Da.length&&QT(this);LT(this);this.dispatchEvent(new CustomEvent("devsite-content-updated",{bubbles:!0}))}Dc(a,b){const c=GT(this);c.length&&((b=b.target)&&JT(this,b),KT(this,c,a));LT(this)}Qa(){const a=
this.j.querySelectorAll("input:checked:not(.toggle-all)").length,b=this.j.querySelectorAll("option"),c=this.j.querySelectorAll("option[selected]").length;this.ra&&(this.ra.disabled=a+c===this.ya.length+b.length);this.qa&&(this.qa.disabled=a+c===0)}};UT.prototype.disconnectedCallback=UT.prototype.disconnectedCallback;UT.prototype.connectedCallback=UT.prototype.connectedCallback;try{customElements.define("devsite-filter",UT)}catch(a){console.warn("devsite.app.customElement.DevsiteFilter",a)};})(_ds_www);
